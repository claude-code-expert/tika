# Tika - 요구사항 명세 (REQUIREMENTS.md)

> Claude Code 참조용 상세 요구사항.
> PRD, TRD와 함께 CLAUDE.md에서 참조한다.
> 버전: 0.2.0
> 최종 수정일: 2026-02-21

---

## 로드맵 개요

| Phase | 버전 | 테마 | 상태 | 레포 |
|-------|------|------|------|------|
| Phase 1 | v0.1.0 | MVP — 칸반 보드 + 체크리스트 + 라벨 + 상위 이슈 + 담당자 | 구현 완료 | tika |
| Phase 2 | v0.2.0 | SaaS — 인증 + 알림 + 라벨 확장 + 댓글 + 고급검색 | 구현 예정 | tika |
| Phase 3 | v0.3.0 | Pro — 리치 에디터 + 파일 첨부 + MCP 서버 + 결제 모듈 | 구현 예정 | tika |
| Phase 4 | v0.4.0 | Team — 워크스페이스 + 팀 협업 + 스위밍 레인 + 대시보드 | 설계만 | 별도 레포 |
| Phase 5 | v1.0.0 | Enterprise — 온프레미스 설치 + 라이센스 관리 | 설계만 | 별도 레포 |

> 전체 로드맵 상세: [ROADMAP.md](ROADMAP.md) 참조

---

# Phase 1: MVP (v0.1.0) — 구현 완료

---

## 1. 기능 요구사항

### FR-001: 티켓 생성

**설명**: 사용자가 새로운 티켓(할 일)을 생성하여 Backlog 칼럼에 추가한다.

**입력 필드**:

| 필드 | 타입 | 필수 | 제약조건 | 기본값 |
|------|------|------|----------|--------|
| title | string | O | 1~200자, 공백만으로 구성 불가 | — |
| description | string | X | 최대 1,000자 | null |
| priority | enum | X | LOW, MEDIUM, HIGH, CRITICAL 중 택 1 | MEDIUM |
| dueDate | date (ISO 8601) | X | 오늘 이후 날짜만 허용 | null |
| checklist | array | X | 최대 20개, 각 항목 1~200자 | [] |
| labelIds | number[] | X | 최대 5개, 유효 라벨 ID | [] |
| issueId | number | X | 유효 이슈 ID | null |
| assigneeId | number | X | 유효 멤버 ID | null |

**처리 규칙**:
- 생성 시 status는 항상 `BACKLOG`
- 생성 시 position은 해당 칼럼의 최솟값 - 1024 (맨 위 배치)
- 칼럼에 티켓이 없을 경우 position = 0
- createdAt, updatedAt 서버에서 자동 설정 (UTC)

**API**: `POST /api/tickets`
**성공 응답**: 201 Created + 생성된 티켓 전체 데이터
**실패 응답**: 400 Bad Request + 검증 에러 상세

**검증 에러 메시지**:
- 제목 누락: `"제목을 입력해주세요"`
- 제목 200자 초과: `"제목은 200자 이내로 입력해주세요"`
- 설명 1,000자 초과: `"설명은 1,000자 이내로 입력해주세요"`
- 잘못된 우선순위: `"우선순위는 LOW, MEDIUM, HIGH, CRITICAL 중 선택해주세요"`
- 과거 마감일: `"마감일은 오늘 이후 날짜를 선택해주세요"`

---

### FR-002: 티켓 목록 조회 (보드 뷰)

**설명**: 칸반 보드에 표시할 전체 티켓을 4개 칼럼별로 그룹화하여 조회한다.

**응답 데이터 구조**:
```json
{
  "board": {
    "BACKLOG": [ /* Ticket[] - position 오름차순 */ ],
    "TODO": [ /* Ticket[] */ ],
    "IN_PROGRESS": [ /* Ticket[] */ ],
    "DONE": [ /* Ticket[] */ ]
  },
  "total": 9
}
```

**처리 규칙**:
- 각 칼럼 내 정렬: position 오름차순
- 각 티켓에 `isOverdue` 파생 필드 포함 (DB 저장 안 함, 조회 시 계산)
- 칼럼 키 순서: BACKLOG → TODO → IN_PROGRESS → DONE (고정)

**카드 표시 정보**: 제목(1줄 말줄임), 우선순위 뱃지, 마감일, 오버듀 표시, 라벨 뱃지, 체크리스트 진행률(예: 2/4), 담당자 아바타, 상위 이슈 태그

**API**: `GET /api/tickets`
**성공 응답**: 200 OK

---

### FR-003: 티켓 상세 조회

**설명**: 특정 티켓의 전체 정보를 조회한다. 카드 클릭 시 상세 모달에 표시.

**입력**: 티켓 ID (path parameter, 양의 정수)

**모달 표시 정보**:
- 제목, 설명 (전문)
- 현재 상태(칼럼명), 우선순위
- 마감일, 생성일, 수정일
- 완료일 (Done 상태인 경우)
- 오버듀 여부
- 체크리스트 섹션 (항목 체크/해제, 추가/삭제)
- 라벨 목록 (색상 뱃지)
- 상위 이슈 브레드크럼 (예: [G] MVP 출시 › [S] 칸반 보드 › [F] 드래그앤드롭)
- 담당자 정보 (아바타 + 이름)
- 수정 / 삭제 버튼

**API**: `GET /api/tickets/:id`
**성공 응답**: 200 OK + 티켓 전체 데이터 (isOverdue 포함)
**실패 응답**: 404 Not Found (`TICKET_NOT_FOUND`)

---

### FR-004: 티켓 수정

**설명**: 상세 모달에서 티켓의 제목, 설명, 우선순위, 마감일, 라벨, 상위 이슈, 담당자를 수정한다. 부분 업데이트(PATCH) 방식.

**수정 가능 필드**:

| 필드 | 타입 | 제약조건 | 특이사항 |
|------|------|----------|----------|
| title | string | 1~200자 | 공백만 불가 |
| description | string \| null | 최대 1,000자 | null 전송 시 기존 설명 삭제 |
| priority | enum | LOW, MEDIUM, HIGH, CRITICAL | — |
| dueDate | string \| null | YYYY-MM-DD, 오늘 이후 | null 전송 시 기존 마감일 삭제 |
| labelIds | number[] \| null | 최대 5개, 유효 라벨 ID | null 또는 빈 배열 시 라벨 전체 해제 |
| issueId | number \| null | 유효 이슈 ID | null 전송 시 상위 이슈 연결 해제 |
| assigneeId | number \| null | 유효 멤버 ID | null 전송 시 미배정 처리 |

**처리 규칙**:
- 부분 수정(PATCH): 전송된 필드만 업데이트, 나머지 유지
- null과 undefined 구분: null = "해당 값을 지운다", 필드 미전송 = "해당 값을 건드리지 않는다"
- updatedAt 자동 갱신

**API**: `PATCH /api/tickets/:id`
**성공 응답**: 200 OK + 수정된 티켓 전체 데이터
**실패 응답**: 400 (검증 실패), 404 (`TICKET_NOT_FOUND`)

---

### FR-005: 티켓 삭제

**설명**: 상세 모달에서 티켓을 삭제한다. 삭제 전 확인 다이얼로그 표시.

**입력**: 티켓 ID (path parameter)

**처리 규칙**:
- 하드 삭제 (Hard Delete): DB에서 완전히 제거 (MVP — soft delete 미적용)
- 프론트엔드에서 삭제 전 확인 다이얼로그 필수 표시

**API**: `DELETE /api/tickets/:id`
**성공 응답**: 204 No Content (응답 본문 없음)
**실패 응답**: 404 Not Found (`TICKET_NOT_FOUND`)

---

### FR-006: 티켓 상태 이동 (드래그앤드롭)

**설명**: 카드를 드래그앤드롭하여 다른 칼럼으로 이동하거나, 같은 칼럼 내에서 순서를 변경한다.

**입력**:

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| ticketId | number | O | 이동할 티켓 ID |
| status | enum | O | 대상 칼럼 (BACKLOG, TODO, IN_PROGRESS, DONE) |
| position | number | O | 칼럼 내 표시 인덱스 (0-based). 서버가 gap-based position으로 변환 |

> **position 처리 방식**: 클라이언트는 표시 인덱스(0, 1, 2...)를 전송하고, 서버는 이를 gap-based position 값(1024 간격)으로 변환하여 저장한다. gap-based position 상세 로직은 DATA_MODEL.md §5.3 참조.

**처리 규칙**:
- 상태(status)와 순서(position) 동시 업데이트
- 서버에서 표시 인덱스를 gap-based position으로 변환
- 영향받는 다른 티켓들의 position도 재정렬
- 트랜잭션으로 원자성 보장
- 이동 제약 없음: 어떤 칼럼에서든 어떤 칼럼으로든 자유 이동 가능

**비즈니스 로직**:
- DONE으로 이동 시: `completedAt = NOW()` 자동 설정
- DONE에서 다른 칼럼으로 이동 시: `completedAt = null` 초기화

**낙관적 업데이트(Optimistic Update)**:
1. 사용자가 카드를 드롭하는 즉시 UI 반영
2. 백그라운드에서 API 호출
3. API 성공 시: 확정
4. API 실패 시: 드래그 시작 시점의 보드 상태로 롤백

**position 계산 전략**:
- 초기 간격: 1024
- 삽입 시: 양쪽 position의 중간값 (midpoint)
- 간격 소진 시: 해당 칼럼 전체 position을 1024 간격으로 재배치

**API**: `PATCH /api/tickets/reorder`
**성공 응답**: 200 OK + 업데이트된 티켓 + 영향받은 티켓 목록
**실패 응답**: 400 (잘못된 status), 404 (`TICKET_NOT_FOUND`)

---

### FR-007: 오버듀 판정

**설명**: 마감일이 지났으나 완료되지 않은 티켓에 시각적 경고를 표시한다.

**판정 규칙**:
```
isOverdue = (dueDate != null) AND (dueDate < 오늘 날짜) AND (status ≠ DONE)
```

**예외 처리**:
- 마감일 미설정 → isOverdue = false
- Done 상태 → 마감일 지나도 isOverdue = false
- 마감일이 오늘 → isOverdue = false (초과한 경우만 해당)

**구현 방식**:
- DB에 저장하지 않음 — 조회 시점에 서버/클라이언트에서 계산 (파생 필드)

**시각적 표현**:
- 카드: 빨간 테두리 + 마감일 옆 경고 아이콘(⚠)
- 모달: "마감 초과" 텍스트 표시

---

### FR-008: 체크리스트

**설명**: 티켓에 하위 작업 목록(체크리스트)을 추가하여 세부 작업의 진행 상황을 추적한다.

**체크리스트 항목 데이터**:

| 필드 | 타입 | 필수 | 제약조건 | 기본값 |
|------|------|------|----------|--------|
| text | string | O | 1~200자 | — |
| isCompleted | boolean | X | — | false |
| position | number | X | — | 자동 계산 |

**처리 규칙**:
- 티켓당 최대 20개 체크리스트 항목
- 생성 시 position은 기존 항목의 max + 1
- 항목 체크/해제 시 isCompleted 토글
- 항목 삭제 시 즉시 제거
- 티켓 삭제 시 관련 체크리스트 항목 모두 CASCADE 삭제

**DB 테이블**: `checklist_items`

| 칼럼 | 타입 | 제약 | 기본값 | 설명 |
|------|------|------|--------|------|
| id | SERIAL | PK | — | 고유 ID |
| ticket_id | INT | NOT NULL, FK → tickets(id) ON DELETE CASCADE | — | 소속 티켓 |
| text | VARCHAR(200) | NOT NULL | — | 항목 텍스트 |
| is_completed | BOOLEAN | NOT NULL | false | 완료 여부 |
| position | INT | NOT NULL | 0 | 정렬 순서 |
| created_at | TIMESTAMPTZ | NOT NULL | now() | 생성 시각 |

**인덱스**: `idx_checklist_items_ticket_id` → (ticket_id)

**API**:
- `POST /api/tickets/:id/checklist` — 체크리스트 항목 추가 (201)
- `PATCH /api/tickets/:id/checklist/:itemId` — 항목 수정/토글 (200)
- `DELETE /api/tickets/:id/checklist/:itemId` — 항목 삭제 (204)

**UI 요소**:
- 티켓 생성 모달: 체크리스트 빌더 (텍스트 입력 + 추가 버튼)
- 티켓 상세 모달: 체크리스트 표시 (체크/해제 가능) + 항목 추가/삭제
- 카드에 체크리스트 진행률 표시 (예: 2/4)

---

### FR-009: 라벨/태그

**설명**: 티켓에 색상 라벨을 붙여 카테고리별로 분류한다.

**라벨 데이터**:

| 필드 | 타입 | 제약조건 |
|------|------|----------|
| id | number | PK |
| name | string | 1~20자, UNIQUE |
| color | string | HEX 색상 코드 (#RRGGBB) |

**기본 제공 라벨**:

| 이름 | 색상 | 설명 |
|------|------|------|
| Frontend | #2b7fff | 프론트엔드 작업 |
| Backend | #00c950 | 백엔드 작업 |
| Design | #ad46ff | 디자인 작업 |
| Bug | #fb2c36 | 버그 수정 |
| Docs | #ffac6d | 문서 작업 |
| Infra | #615fff | 인프라 작업 |

**처리 규칙**:
- 최대 20개 라벨 생성 가능
- 티켓당 최대 5개 라벨 부착 가능 (M:N 관계)
- 라벨 CRUD: 생성 (이름 + 색상 선택), 이름/색상 수정, 삭제
- 커스텀 라벨 생성 시 색상 팔레트에서 선택
- 라벨명 최대 20자
- 라벨 삭제 시 해당 라벨이 부착된 모든 티켓에서 자동 제거
- 보드에서 라벨 기준 필터링 지원

**DB 테이블**: `labels`

| 칼럼 | 타입 | 제약 | 기본값 | 설명 |
|------|------|------|--------|------|
| id | SERIAL | PK | — | 고유 ID |
| name | VARCHAR(20) | NOT NULL, UNIQUE | — | 라벨명 |
| color | VARCHAR(7) | NOT NULL | '#3B82F6' | HEX 색상 |
| created_at | TIMESTAMPTZ | NOT NULL | now() | 생성 시각 |

**DB 테이블**: `ticket_labels` (M:N 관계)

| 칼럼 | 타입 | 제약 | 설명 |
|------|------|------|------|
| ticket_id | INT | FK → tickets(id) ON DELETE CASCADE | 티켓 ID |
| label_id | INT | FK → labels(id) ON DELETE CASCADE | 라벨 ID |
| | | PK (ticket_id, label_id) | 복합 PK |

**API**:
- `GET /api/labels` — 전체 라벨 목록 (200)
- `POST /api/labels` — 라벨 생성 (201)
- `PATCH /api/labels/:id` — 라벨 수정 (200)
- `DELETE /api/labels/:id` — 라벨 삭제 (204)

**UI 요소**:
- 티켓 카드: 라벨 뱃지 (색상 + 이름)
- 티켓 생성/수정 모달: 라벨 멀티 선택 (칩 토글 방식) + 커스텀 라벨 생성 (이름 입력 + 색상 팔레트)
- 보드 필터바: 라벨 필터

---

### FR-010: 상위 이슈 (이슈 계층 구조)

**설명**: 티켓을 4단계 계층 구조(Goal → Story → Feature → Task)로 분류하여 상위 이슈와의 관계를 설정한다.

**계층 구조**:

| 레벨 | 타입 | 설명 | 예시 |
|------|------|------|------|
| 1 | GOAL | 최상위 목표 | "MVP 출시", "팀 협업 확장" |
| 2 | STORY | Goal 하위의 스토리 | "사용자 인증 시스템", "칸반 보드 핵심 기능" |
| 3 | FEATURE | Story 하위의 기능 단위 | "인증 API", "드래그앤드롭" |
| 4 | TASK | Feature 하위의 세부 작업 | "JWT 토큰 발급 구현", "드롭존 이벤트 핸들러" |

**처리 규칙**:
- 티켓에 상위 이슈(Goal/Story/Feature/Task)를 선택적으로 연결
- 4단계 캐스케이딩 드롭다운: Goal 선택 → Story 목록 갱신 → Feature 목록 갱신 → Task 목록 갱신
- Goal/Story/Feature/Task CRUD 가능
- 상위 이슈 삭제 시 하위 항목의 parent_id = null 처리
- 티켓에 연결된 이슈 삭제 시 ticket의 issue_id = null 처리

**DB 테이블**: `issues`

| 칼럼 | 타입 | 제약 | 기본값 | 설명 |
|------|------|------|--------|------|
| id | SERIAL | PK | — | 고유 ID |
| name | VARCHAR(100) | NOT NULL | — | 이슈명 |
| type | VARCHAR(10) | NOT NULL | — | GOAL, STORY, FEATURE, TASK |
| parent_id | INT | FK → issues(id) ON DELETE SET NULL, NULLABLE | null | 상위 이슈 ID |
| created_at | TIMESTAMPTZ | NOT NULL | now() | 생성 시각 |

**인덱스**:
- `idx_issues_parent_id` → (parent_id)
- `idx_issues_type` → (type)

**tickets 테이블 변경**: `issue_id INT NULLABLE FK → issues(id) ON DELETE SET NULL` 칼럼 추가

**API**:
- `GET /api/issues` — 전체 이슈 계층 목록 (200)
- `POST /api/issues` — 이슈 생성 (201)
- `PATCH /api/issues/:id` — 이슈 수정 (200)
- `DELETE /api/issues/:id` — 이슈 삭제 (204)

**UI 요소**:
- 티켓 생성/수정 모달: 4단계 캐스케이딩 셀렉트 (Goal → Story → Feature → Task)
- 티켓 상세 모달: 상위 이슈 브레드크럼 표시 (예: [G] MVP 출시 › [S] 칸반 보드 › [F] 드래그앤드롭 › [T] 드롭존 이벤트 핸들러)
- 카드: 상위 이슈 태그 (최하위 이슈 타입명)

---

### FR-011: 담당자 배정

**설명**: 티켓에 담당자를 배정하여 누가 해당 작업을 수행하는지 표시한다.

**멤버 데이터**:

| 필드 | 타입 | 제약조건 |
|------|------|----------|
| id | number | PK |
| name | string | 1~50자 |
| color | string | HEX 색상 코드 (아바타 배경색) |

**처리 규칙**:
- 멤버 목록을 사전 등록하여 관리
- 티켓당 1명의 담당자 배정 또는 미배정
- 담당자 삭제 시 해당 담당자가 배정된 티켓은 미배정(null) 처리
- Phase 2에서 Google OAuth users 테이블과 통합 예정

**DB 테이블**: `members`

| 칼럼 | 타입 | 제약 | 기본값 | 설명 |
|------|------|------|--------|------|
| id | SERIAL | PK | — | 고유 ID |
| name | VARCHAR(50) | NOT NULL | — | 멤버 이름 |
| color | VARCHAR(7) | NOT NULL | '#7EB4A2' | 아바타 배경색 |
| created_at | TIMESTAMPTZ | NOT NULL | now() | 생성 시각 |

**tickets 테이블 변경**: `assignee_id INT NULLABLE FK → members(id) ON DELETE SET NULL` 칼럼 추가

**API**:
- `GET /api/members` — 전체 멤버 목록 (200)
- `POST /api/members` — 멤버 등록 (201)
- `PATCH /api/members/:id` — 멤버 수정 (200)
- `DELETE /api/members/:id` — 멤버 삭제 (204)

**UI 요소**:
- 티켓 생성/수정 모달: 담당자 셀렉트 드롭다운 (미배정 옵션 포함)
- 카드 하단: 담당자 아바타 (이름 이니셜 + 배경색)
- 보드 필터: 담당자 기준 필터링

---

### 기능 요구사항 요약

| ID | 기능 | 설명 | API |
|----|------|------|-----|
| FR-001 | 티켓 생성 | 새 티켓을 만들어 Backlog에 추가 | `POST /api/tickets` |
| FR-002 | 보드 조회 | 칼럼별 그룹화된 전체 티켓 조회 | `GET /api/tickets` |
| FR-003 | 상세 조회 | 특정 티켓 전체 정보 + isOverdue | `GET /api/tickets/:id` |
| FR-004 | 티켓 수정 | 제목/설명/우선순위/마감일/라벨/상위이슈/담당자 부분 수정 | `PATCH /api/tickets/:id` |
| FR-005 | 티켓 삭제 | 확인 후 영구 삭제 | `DELETE /api/tickets/:id` |
| FR-006 | 상태 이동 | 드래그앤드롭으로 칼럼/순서 변경 | `PATCH /api/tickets/reorder` |
| FR-007 | 오버듀 판정 | 마감 초과 티켓에 경고 표시 | 조회 시 파생 필드 |
| FR-008 | 체크리스트 | 하위 작업 진행 추적 | `/api/tickets/:id/checklist` |
| FR-009 | 라벨/태그 | 색상 라벨로 카테고리 분류 | `/api/labels` |
| FR-010 | 상위 이슈 | Goal→Story→Feature 계층 연결 | `/api/issues` |
| FR-011 | 담당자 | 멤버 배정 및 역할 표시 | `/api/members` |

---

## 2. 비기능 요구사항

### NFR-001: 성능

| 항목 | 기준 | 측정 방법 |
|------|------|----------|
| API 응답 시간 | p95 기준 200ms 이하 | 서버 사이드 로깅 |
| 보드 초기 로드 | 2초 이내 (FCP) | Lighthouse |
| 드래그 반응 | 체감 지연 없음 | 낙관적 업데이트로 보장 |

### NFR-002: 반응형 디자인

| 디바이스 | 화면 너비 | 레이아웃 | 드래그 방식 |
|----------|----------|---------|------------|
| 모바일 | 360px 이상 | 단일 칼럼 세로 스크롤 | 터치 드래그 (200ms 딜레이) |
| 태블릿 | 768px 이상 | 2칼럼 그리드 | 터치 드래그 |
| 데스크톱 | 1024px 이상 | 4칼럼 가로 배치 | 마우스 드래그 |

### NFR-003: 접근성

| 항목 | 기준 |
|------|------|
| 키보드 네비게이션 | Tab으로 카드 이동, Enter로 상세 열기, ESC로 모달 닫기 |
| 스크린 리더 | 모든 대화형 요소에 `role`, `aria-label` 속성 적용 |
| 색상 대비 | WCAG 2.1 AA 기준 충족 |

### NFR-004: 데이터 무결성

| 항목 | 전략 |
|------|------|
| 낙관적 업데이트 | UI 즉시 반영 → API 성공 시 확정, 실패 시 롤백 |
| position 충돌 방지 | 정수 간격(1024) + 간격 소진 시 전체 재정렬 |
| 입력 검증 | 프론트엔드(UX) + 백엔드(신뢰 경계) Zod 이중 검증 |

### NFR-005: 브라우저 호환성

| 브라우저 | 지원 범위 |
|----------|----------|
| Chrome | 최신 2개 버전 |
| Safari | 최신 2개 버전 |
| Firefox | 최신 2개 버전 |
| Edge | 최신 2개 버전 |
| IE | **미지원** |

### NFR-006: 배포 환경

| 항목 | 선택 | 비고 |
|------|------|------|
| 호스팅 | Vercel | Next.js 최적 배포, Git push 자동 배포 |
| 데이터베이스 | Vercel Postgres (Neon) | 서버리스 최적화, Drizzle ORM 연동 |
| HTTPS | Vercel 기본 제공 | 별도 인증서 설정 불필요 |
| 도메인 | Vercel 서브도메인 | MVP 단계 (커스텀 도메인 Phase 2) |

---

## 3. 사용자 스토리

> 형식: **[역할]로서, [행동]을 할 수 있다. 그래서 [가치/목적]을 달성한다.**

### US-001: 새 할 일 등록

> **사용자**로서, 떠오른 할 일을 빠르게 등록할 수 있다. 그래서 **아이디어가 떠오르는 즉시 기록하여 잊어버리지 않는다.**

**인수 조건**:
- [ ] 보드 상단의 "+ 새 티켓" 버튼을 누르면 생성 모달이 열린다
- [ ] 제목을 입력하고 "생성" 버튼을 누르면 Backlog 칼럼 맨 위에 카드가 추가된다
- [ ] 제목만 입력하면 바로 생성 가능 (나머지 필드는 선택)
- [ ] 빈 제목으로 생성 시도 시 "제목을 입력해주세요" 에러 표시
- [ ] 생성 완료 시 모달이 닫히고 보드에 새 카드가 즉시 나타난다

**관련 FR**: FR-001

### US-002: 할 일의 상세 정보 설정

> **사용자**로서, 할 일에 우선순위와 마감일을 설정할 수 있다. 그래서 **여러 할 일 중 어떤 것을 먼저 처리해야 하는지 판단하고 일정을 관리한다.**

**인수 조건**:
- [ ] 생성 시 우선순위를 Low / Medium / High / Critical 중 선택할 수 있다
- [ ] 선택하지 않으면 Medium으로 자동 설정된다
- [ ] 마감일을 날짜 입력 필드에서 선택할 수 있다
- [ ] 오늘 이전 날짜는 선택할 수 없다
- [ ] 설명란에 최대 1,000자까지 상세 내용을 입력할 수 있다

**관련 FR**: FR-001

### US-003: 칸반 보드로 현황 파악

> **사용자**로서, 모든 할 일을 상태별로 분류된 칸반 보드에서 볼 수 있다. 그래서 **어떤 일이 대기 중이고, 진행 중이고, 완료되었는지 한눈에 파악한다.**

**인수 조건**:
- [ ] 페이지를 열면 4개 칼럼(Backlog, TODO, In Progress, Done)이 표시된다
- [ ] 각 칼럼에 해당 상태의 티켓이 카드 형태로 나열된다
- [ ] 각 칼럼 상단에 해당 칼럼의 카드 수가 뱃지로 표시된다
- [ ] 카드에는 제목, 우선순위 뱃지, 마감일이 표시된다
- [ ] 데스크톱에서 4칼럼, 태블릿에서 2칼럼, 모바일에서 1칼럼으로 표시된다

**관련 FR**: FR-002

### US-004: 마감 초과 할 일 인지

> **사용자**로서, 마감일이 지난 미완료 할 일을 시각적으로 구분할 수 있다. 그래서 **긴급하게 처리해야 할 작업을 놓치지 않는다.**

**인수 조건**:
- [ ] 마감일이 지났고 Done이 아닌 카드에 빨간 테두리가 표시된다
- [ ] 마감일 옆에 경고 아이콘(⚠)이 표시된다
- [ ] Done 칼럼의 카드는 마감일이 지나도 경고가 표시되지 않는다
- [ ] 마감일이 오늘인 카드에는 경고가 표시되지 않는다 (초과한 경우만)

**관련 FR**: FR-007

### US-005: 드래그앤드롭으로 상태 변경

> **사용자**로서, 카드를 드래그하여 다른 칼럼으로 옮길 수 있다. 그래서 **마우스(또는 터치) 한 동작으로 직관적이고 빠르게 할 일의 상태를 변경한다.**

**인수 조건**:
- [ ] 카드를 클릭한 채로 끌면 드래그가 시작된다
- [ ] 다른 칼럼 위에 놓으면 해당 칼럼으로 이동한다
- [ ] 같은 칼럼 내에서 드래그하면 순서가 변경된다
- [ ] 이동 즉시 UI에 반영된다 (API 응답을 기다리지 않음)
- [ ] 서버 통신 실패 시 카드가 원래 위치로 되돌아간다
- [ ] 어떤 칼럼에서든 어떤 칼럼으로든 자유롭게 이동 가능하다
- [ ] 모바일에서는 길게 터치(200ms) 후 드래그할 수 있다

**관련 FR**: FR-006

### US-006: 할 일 완료 처리

> **사용자**로서, 카드를 Done 칼럼으로 이동하여 할 일을 완료 처리할 수 있다. 그래서 **완료된 작업을 기록하고, 남은 작업에 집중한다.**

**인수 조건**:
- [ ] 카드를 Done 칼럼으로 드래그하면 완료로 처리된다
- [ ] 완료 처리 시 완료 시각(completedAt)이 자동 기록된다
- [ ] Done에서 다른 칼럼으로 되돌리면 완료가 취소된다 (completedAt = null)
- [ ] 완료 취소 후 마감일이 지났다면 오버듀로 표시된다

**관련 FR**: FR-006

### US-007: 할 일 내용 수정

> **사용자**로서, 기존 할 일의 제목이나 세부 정보를 수정할 수 있다. 그래서 **상황이 변했을 때 할 일의 내용을 최신 상태로 유지한다.**

**인수 조건**:
- [ ] 카드를 클릭하면 상세 모달이 열린다
- [ ] 모달에서 "수정" 버튼을 누르면 편집 모드로 전환된다
- [ ] 제목, 설명, 우선순위, 마감일을 수정할 수 있다
- [ ] 설명이나 마감일을 비우면 해당 정보가 삭제된다 (null 처리)
- [ ] "저장" 버튼을 누르면 변경 사항이 반영된다
- [ ] 모달 외부를 클릭하거나 ESC 키를 누르면 모달이 닫힌다

**관련 FR**: FR-003, FR-004

### US-008: 할 일 삭제

> **사용자**로서, 더 이상 필요 없는 할 일을 삭제할 수 있다. 그래서 **보드를 깔끔하게 유지하고 불필요한 작업에 시선을 빼앗기지 않는다.**

**인수 조건**:
- [ ] 상세 모달에서 "삭제" 버튼을 누른다
- [ ] "정말 삭제하시겠습니까?" 확인 다이얼로그가 표시된다
- [ ] "삭제"를 누르면 티켓이 영구 삭제되고 보드에서 사라진다
- [ ] "취소"를 누르면 삭제가 취소되고 모달로 돌아간다

**관련 FR**: FR-005

### US-009: 세부 작업 체크리스트 관리

> **사용자**로서, 티켓에 세부 작업 체크리스트를 추가하여 완료 여부를 추적할 수 있다. 그래서 **큰 작업을 작은 단위로 나누어 진행 상황을 체계적으로 관리한다.**

**인수 조건**:
- [ ] 티켓 생성 시 체크리스트 항목을 추가할 수 있다
- [ ] 상세 모달에서 체크리스트 항목을 추가/삭제할 수 있다
- [ ] 체크박스를 클릭하여 항목의 완료 상태를 토글할 수 있다
- [ ] 카드에 체크리스트 진행률(예: 2/4)이 표시된다
- [ ] 티켓당 최대 20개 항목을 추가할 수 있다

**관련 FR**: FR-008

### US-010: 라벨로 할 일 분류

> **사용자**로서, 티켓에 색상 라벨을 붙여 카테고리별로 구분할 수 있다. 그래서 **프로젝트나 영역별로 할 일을 체계적으로 관리한다.**

**인수 조건**:
- [ ] 기본 제공 라벨(Frontend, Backend, Design, Bug, Docs, Infra) 중 선택할 수 있다
- [ ] 커스텀 라벨을 이름과 색상을 지정하여 생성할 수 있다
- [ ] 티켓 생성/수정 시 라벨을 최대 5개까지 선택할 수 있다
- [ ] 카드에 라벨 뱃지가 색상과 함께 표시된다
- [ ] 보드에서 특정 라벨만 필터링할 수 있다

**관련 FR**: FR-009

### US-011: 상위 이슈 연결로 업무 구조화

> **사용자**로서, 티켓을 상위 이슈(Goal → Story → Feature)에 연결할 수 있다. 그래서 **개별 작업이 어떤 목표와 스토리에 속하는지 파악하고 업무를 체계적으로 구조화한다.**

**인수 조건**:
- [ ] 티켓 생성/수정 시 Goal을 선택하면 해당 Goal의 Story 목록이 표시된다
- [ ] Story를 선택하면 해당 Story의 Feature 목록이 표시된다
- [ ] 선택한 계층이 티켓에 연결된다
- [ ] 카드에 연결된 상위 이슈의 Feature명이 태그로 표시된다
- [ ] 상세 모달에서 상위 이슈 브레드크럼이 표시된다 (예: MVP 출시 › 칸반 보드 › 드래그앤드롭)
- [ ] Goal/Story/Feature를 추가/수정/삭제할 수 있다

**관련 FR**: FR-010

### US-012: 담당자 배정

> **사용자**로서, 티켓에 담당자를 배정할 수 있다. 그래서 **누가 어떤 작업을 맡고 있는지 명확히 하여 역할 분담을 관리한다.**

**인수 조건**:
- [ ] 멤버를 사전 등록하여 관리할 수 있다
- [ ] 티켓 생성/수정 시 담당자를 드롭다운에서 선택할 수 있다
- [ ] "미배정" 상태로 둘 수 있다
- [ ] 카드에 담당자 아바타(이니셜 + 배경색)가 표시된다
- [ ] 보드에서 담당자 기준으로 필터링할 수 있다

**관련 FR**: FR-011

---

### 사용자 스토리 ↔ 기능 요구사항 매핑

| 사용자 스토리 | 관련 FR | 관련 테스트 케이스 |
|--------------|---------|------------------|
| US-001: 새 할 일 등록 | FR-001 | TC-API-001, TC-COMP-004 |
| US-002: 상세 정보 설정 | FR-001 | TC-API-001 |
| US-003: 칸반 보드 현황 파악 | FR-002 | TC-API-002, TC-COMP-002, TC-COMP-003 |
| US-004: 마감 초과 할 일 인지 | FR-007 | TC-API-002, TC-COMP-001 |
| US-005: 드래그앤드롭 상태 변경 | FR-006 | TC-API-006, TC-INT-001 |
| US-006: 할 일 완료 처리 | FR-006 | TC-API-006, TC-INT-001 |
| US-007: 할 일 내용 수정 | FR-003, FR-004 | TC-API-003, TC-API-004, TC-COMP-005 |
| US-008: 할 일 삭제 | FR-005 | TC-API-005, TC-COMP-006 |
| US-009: 세부 작업 체크리스트 관리 | FR-008 | — |
| US-010: 라벨로 할 일 분류 | FR-009 | — |
| US-011: 상위 이슈 연결로 업무 구조화 | FR-010 | — |
| US-012: 담당자 배정 | FR-011 | — |

---

## 4. 공통 정의

### 칼럼(상태) 정의

```typescript
const TICKET_STATUS = {
  BACKLOG: 'BACKLOG',
  TODO: 'TODO',
  IN_PROGRESS: 'IN_PROGRESS',
  DONE: 'DONE',
} as const;

type TicketStatus = typeof TICKET_STATUS[keyof typeof TICKET_STATUS];
```

- **칼럼 순서**: BACKLOG → TODO → IN_PROGRESS → DONE (고정, 변경 불가)
- **이동 제약**: 없음 (어떤 칼럼에서든 어떤 칼럼으로든 이동 가능)
- **칼럼 설명**:
  - BACKLOG: 등록만 된 상태. 아직 일정이 잡히지 않은 할 일
  - TODO: 할 일로 확정. 오늘 또는 이번 주 내 처리 예정
  - IN_PROGRESS: 현재 진행 중인 작업
  - DONE: 완료된 작업

### 우선순위 정의

```typescript
const TICKET_PRIORITY = {
  LOW: 'LOW',
  MEDIUM: 'MEDIUM',
  HIGH: 'HIGH',
  CRITICAL: 'CRITICAL',
} as const;

type TicketPriority = typeof TICKET_PRIORITY[keyof typeof TICKET_PRIORITY];
```

| 우선순위 | 뱃지 색상 | 레이블 |
|----------|----------|--------|
| LOW | 회색 (gray) | 낮음 |
| MEDIUM | 파란색 (blue) | 보통 |
| HIGH | 노란색 (yellow) | 높음 |
| CRITICAL | 빨간색 (red) | 긴급 |

### 이슈 타입 정의

```typescript
const ISSUE_TYPE = {
  GOAL: 'GOAL',
  STORY: 'STORY',
  FEATURE: 'FEATURE',
} as const;

type IssueType = typeof ISSUE_TYPE[keyof typeof ISSUE_TYPE];
```

| 타입 | 레벨 | 설명 | 예시 |
|------|------|------|------|
| GOAL | 1 | 최상위 목표 | "MVP 출시" |
| STORY | 2 | Goal 하위 스토리 | "사용자 인증 시스템" |
| FEATURE | 3 | Story 하위 기능 | "인증 API" |

### 에러 응답 형식

```json
{
  "error": {
    "code": "VALIDATION_ERROR | TICKET_NOT_FOUND | INTERNAL_ERROR",
    "message": "사용자가 읽을 수 있는 한국어 에러 메시지"
  }
}
```

| 에러 코드 | HTTP 상태 | 발생 조건 |
|-----------|----------|----------|
| VALIDATION_ERROR | 400 | 입력값 제약조건 위반 |
| TICKET_NOT_FOUND | 404 | 존재하지 않는 티켓 ID |
| INTERNAL_ERROR | 500 | 서버 내부 오류 |

---

# Phase 2: SaaS (v0.2.0) — 구현 예정

> 개인 사용자 인증 기반 SaaS 전환. 커스텀 도메인으로 정식 서비스 운영.
> Google OAuth 로그인, Slack/Telegram 마감일 알림, 라벨 확장(사용자별 격리), 댓글, 고급 검색을 추가한다.

---

## 1. 기능 요구사항

### FR-101: Google OAuth 인증

**설명**: Google 계정으로 로그인하여 개인 티켓을 관리한다. 인증된 사용자만 서비스를 이용할 수 있다.

**처리 규칙**:
- Google OAuth 2.0 기반 로그인/로그아웃
- 최초 로그인 시 사용자 자동 등록 (email, name, avatar)
- 세션 기반 인증 (NextAuth.js v5)
- 모든 API 요청에 세션 검증 적용
- 인증되지 않은 요청은 로그인 페이지로 리다이렉트

**사용자 데이터**:

| 필드 | 타입 | 설명 |
|------|------|------|
| id | string | 고유 식별자 (OAuth provider ID) |
| email | string | Google 이메일 (UNIQUE) |
| name | string | 표시 이름 |
| avatarUrl | string | 프로필 이미지 URL |
| createdAt | timestamp | 가입일 |

**UI 요소**:
- 로그인 페이지: Google 로그인 버튼
- 헤더: 프로필 아바타 + 드롭다운 (이름, 이메일, 로그아웃)

---

### FR-102: 알림 채널 설정

**설명**: 마감일 알림을 수신할 채널(Slack 또는 Telegram)을 설정한다.

**지원 채널**:

| 채널 | 연동 방식 | 필요 정보 |
|------|----------|----------|
| Slack | Incoming Webhook | Webhook URL |
| Telegram | Bot API | Bot Token + Chat ID |

**처리 규칙**:
- 사용자당 최소 0개, 최대 2개 채널 설정 가능 (Slack 1 + Telegram 1)
- 채널 설정 시 테스트 메시지 발송으로 연동 확인
- 채널별 알림 ON/OFF 토글

**UI 요소**:
- 설정 페이지: 알림 채널 관리 섹션
- Slack Webhook URL 입력 + 테스트 버튼
- Telegram Bot Token / Chat ID 입력 + 테스트 버튼
- 채널별 활성화/비활성화 토글

---

### FR-103: 마감일 D-1 알림

**설명**: 마감일 하루 전에 설정된 채널(Slack/Telegram)로 알림을 자동 발송한다.

**알림 조건**:
- `dueDate - 1일 == 오늘` AND `status ≠ DONE`
- 알림 채널이 1개 이상 활성화되어 있을 것

**알림 메시지 형식**:
```
[Tika] 내일 마감 예정인 티켓이 있습니다.
- 티켓: {티켓 제목}
- 마감일: {YYYY-MM-DD}
- 우선순위: {HIGH/MEDIUM/LOW}
```

**처리 규칙**:
- 매일 정해진 시각(예: 09:00 KST)에 스케줄러 실행
- Vercel Cron 또는 외부 스케줄러 사용
- 발송 성공/실패 결과를 알림 내역에 기록
- 동일 티켓에 대해 중복 알림 방지 (1티켓 1회/일)

---

### FR-104: 알림 내역 조회

**설명**: 발송된 알림의 이력을 확인한다.

**알림 내역 데이터**:

| 필드 | 타입 | 설명 |
|------|------|------|
| id | number | 알림 ID |
| ticketId | number | 관련 티켓 ID |
| channel | enum | SLACK, TELEGRAM |
| message | string | 알림 메시지 내용 |
| status | enum | SENT, FAILED |
| sentAt | timestamp | 발송 시각 |
| errorMessage | string \| null | 실패 시 에러 메시지 |

**처리 규칙**:
- 최신순 정렬
- 페이지네이션 (20건 단위)
- 읽음/안읽음 상태 관리
- 알림 클릭 시 해당 티켓 상세 모달로 이동

**UI 요소**:
- 헤더: 알림 벨 아이콘 + 안읽은 알림 수 뱃지
- 알림 드롭다운: 최근 알림 목록
- 알림 내역 페이지: 전체 알림 목록 + 필터(채널, 상태)

---

### FR-105: 라벨 확장 — 사용자별 라벨 관리

**설명**: Phase 1에서 구현된 라벨 기능(FR-009)을 사용자별 격리로 확장한다. 인증 도입 후 각 사용자가 자신만의 라벨을 관리할 수 있도록 한다.

> 기본 라벨 CRUD, 티켓 부착, 필터링은 Phase 1 FR-009에서 구현 완료.

**확장 내용**:
- labels 테이블에 `user_id` FK 추가 (사용자별 라벨 격리)
- 라벨명 UNIQUE 제약을 `(user_id, name)` 복합 UNIQUE로 변경
- 사용자당 최대 20개 라벨 제한
- 설정 페이지에서 라벨 관리 UI 통합

---

### FR-106: 댓글

**설명**: 티켓에 텍스트 댓글을 작성하여 메모나 진행 상황을 기록한다.

**댓글 데이터**:

| 필드 | 타입 | 제약조건 |
|------|------|----------|
| id | number | PK |
| ticketId | number | FK → tickets |
| text | string | 1~500자 |
| createdAt | timestamp | 자동 설정 |
| updatedAt | timestamp | 자동 갱신 |

**처리 규칙**:
- 티켓 상세 모달 하단에 댓글 섹션 표시
- 댓글 작성, 수정, 삭제 가능 (본인 댓글만)
- 최신순 정렬
- 티켓 삭제 시 관련 댓글 모두 CASCADE 삭제

**UI 요소**:
- 티켓 모달: 댓글 목록 + 댓글 입력 폼
- 각 댓글: 작성 시각, 수정/삭제 버튼

---

### FR-107: 고급 검색/필터링

**설명**: 다중 조건으로 티켓을 검색하고 필터링한다.

**검색/필터 조건**:

| 조건 | 파라미터 | 설명 |
|------|----------|------|
| 키워드 검색 | `search` | 제목 + 설명에서 부분 일치 (ILIKE) |
| 우선순위 | `priority` | LOW, MEDIUM, HIGH, CRITICAL (복수 선택) |
| 상태 | `status` | BACKLOG, TODO, IN_PROGRESS, DONE (복수 선택) |
| 마감일 범위 | `dueDateFrom`, `dueDateTo` | 시작일 ~ 종료일 |
| 라벨 | `labelId` | 특정 라벨이 붙은 티켓 (복수 선택) |
| 오버듀 | `overdue` | true일 때 마감 초과 티켓만 |

**처리 규칙**:
- 모든 조건은 AND 조합
- 검색 결과는 보드 뷰에 필터 적용된 상태로 표시
- 필터 초기화 버튼 제공

**UI 요소**:
- 보드 상단: 검색 입력 + 접이식 필터 패널
- 필터 패널: 우선순위 체크박스, 상태 체크박스, 날짜 범위, 라벨 선택

---

### 기능 요구사항 요약

| ID | 기능 | 설명 |
|----|------|------|
| FR-101 | Google OAuth | 인증 기반 개인 서비스 |
| FR-102 | 알림 채널 설정 | Slack/Telegram 연동 및 ON/OFF |
| FR-103 | 마감일 D-1 알림 | 하루 전 자동 알림 발송 |
| FR-104 | 알림 내역 | 발송 이력 조회 및 관리 |
| FR-105 | 라벨 확장 | 사용자별 라벨 격리 (FR-009 확장) |
| FR-106 | 댓글 | 티켓 내 메모/기록 |
| FR-107 | 고급 검색 | 다중 조건 필터링 |

---

## 2. 비기능 요구사항

### NFR-101: SaaS 운영

| 항목 | 기준 |
|------|------|
| 커스텀 도메인 | 정식 도메인 연결 + HTTPS |
| 가용성 | 99.5% 이상 (Vercel SLA 기반) |
| 데이터 격리 | 사용자별 데이터 완전 분리 (user_id FK) |

### NFR-102: 인증 보안

| 항목 | 기준 |
|------|------|
| 세션 관리 | NextAuth.js JWT 기반, httpOnly 쿠키 |
| CSRF 방지 | NextAuth.js 내장 CSRF 토큰 |
| OAuth 토큰 | 서버 사이드 저장, 클라이언트 노출 금지 |

---

## 3. 사용자 스토리

### US-101: 내 계정으로 로그인

> **사용자**로서, Google 계정으로 로그인하여 내 할 일만 볼 수 있다. 그래서 **다른 사람과 섞이지 않고 개인 업무를 안전하게 관리한다.**

**인수 조건**:
- [ ] 비로그인 상태에서 서비스 접근 시 로그인 페이지로 이동한다
- [ ] Google 로그인 버튼을 누르면 Google OAuth 화면이 열린다
- [ ] 로그인 성공 후 내 칸반 보드가 표시된다
- [ ] 헤더에 내 프로필 아바타와 이름이 표시된다
- [ ] 로그아웃하면 로그인 페이지로 돌아간다

**관련 FR**: FR-101

### US-102: 마감일 알림 받기

> **사용자**로서, 마감일 하루 전에 Slack이나 Telegram으로 알림을 받을 수 있다. 그래서 **마감일을 놓치지 않고 시간 안에 업무를 완료한다.**

**인수 조건**:
- [ ] 설정 페이지에서 Slack Webhook URL 또는 Telegram Bot 정보를 입력한다
- [ ] 테스트 버튼으로 연동이 정상인지 확인한다
- [ ] 마감일 하루 전 아침에 설정된 채널로 알림이 온다
- [ ] 알림에 티켓 제목, 마감일, 우선순위가 포함된다
- [ ] 알림 벨 아이콘에서 발송 내역을 확인할 수 있다

**관련 FR**: FR-102, FR-103, FR-104

### US-103: 사용자별 라벨 관리

> **사용자**로서, 내 계정에 속한 라벨을 독립적으로 관리할 수 있다. 그래서 **다른 사용자와 라벨이 섞이지 않고 개인화된 분류 체계를 유지한다.**

> 기본 라벨 CRUD 및 티켓 부착은 Phase 1 US-010에서 구현 완료.

**인수 조건**:
- [ ] 로그인한 사용자별로 라벨이 격리되어 표시된다
- [ ] 다른 사용자의 라벨은 보이지 않는다
- [ ] 같은 라벨명이라도 사용자가 다르면 별도로 생성 가능하다

**관련 FR**: FR-009 (Phase 1), FR-105 (Phase 2 확장)

### US-104: 티켓에 댓글 남기기

> **사용자**로서, 티켓에 메모나 진행 상황을 댓글로 남길 수 있다. 그래서 **나중에 맥락을 잊지 않고 업무 히스토리를 추적한다.**

**인수 조건**:
- [ ] 티켓 상세 모달에서 댓글을 작성할 수 있다
- [ ] 댓글을 수정하거나 삭제할 수 있다
- [ ] 댓글은 최신순으로 표시된다

**관련 FR**: FR-106

### US-105: 조건으로 티켓 검색

> **사용자**로서, 키워드나 조건으로 원하는 티켓을 빠르게 찾을 수 있다. 그래서 **할 일이 많아져도 필요한 티켓을 즉시 찾아 작업한다.**

**인수 조건**:
- [ ] 검색창에 키워드를 입력하면 제목/설명에서 일치하는 티켓만 표시된다
- [ ] 우선순위, 상태, 마감일 범위, 라벨로 필터링할 수 있다
- [ ] 여러 조건을 조합해서 사용할 수 있다
- [ ] 필터 초기화로 전체 보드를 다시 볼 수 있다

**관련 FR**: FR-107

---

## 4. UI/UX 개선 요구사항

> Phase 1에서 구현된 기능의 사용성 및 접근성 개선 항목이다.

### UFR-101: 반응형 레이아웃

**설명**: 데스크톱 외 태블릿·모바일 화면에서도 칸반 보드를 사용할 수 있도록 반응형 레이아웃을 구현한다.

| 디바이스 | 화면 너비 | 레이아웃 | 드래그 방식 |
|----------|----------|---------|------------|
| 모바일 | 360px 이상 | 단일 칼럼 + 탭 전환 | 터치 드래그 (200ms 딜레이) |
| 태블릿 | 768px 이상 | 2칼럼 그리드 | 터치 드래그 |
| 데스크톱 | 1024px 이상 | 4칼럼 가로 배치 | 마우스 드래그 |

**구현 방법**:
- Tailwind 반응형 유틸리티 (sm:, md:, lg:) 적용
- 모바일용 TabBar 컴포넌트 생성 (칼럼 전환)
- 태블릿용 Board 레이아웃 미디어 쿼리 추가

---

### UFR-102: 접근성 (a11y)

**설명**: WCAG 2.1 AA 기준을 충족하도록 접근성을 보강한다.

| 항목 | 구현 내용 |
|------|----------|
| Skip-to-content | 본문 바로가기 링크 추가 |
| aria-live | 티켓 상태 변경 시 스크린 리더 알림 (`aria-live="polite"`) |
| 색상 대비 | 모든 텍스트·배경 조합 WCAG AA (4.5:1) 충족 검증 |
| 키보드 네비게이션 | Tab으로 카드 이동, Enter로 상세 열기, ESC로 모달 닫기 |

---

### UFR-103: 모달 애니메이션 & 스크롤 잠금

**설명**: 모달 열림/닫힘 시 애니메이션과 본문 스크롤 잠금을 적용한다.

| 항목 | 동작 |
|------|------|
| 모달 열기 | fade-in + scale (300ms ease-out) |
| 모달 닫기 | fade-out + scale-down (200ms ease-in) |
| 스크롤 잠금 | 모달 열림 시 `body overflow: hidden`, 닫힘 시 복원 |

---

### UFR-104: 드래그 오버레이 시각 효과

**설명**: 드래그 중인 카드에 시각적 피드백을 강화한다.

- 드래그 중 카드: `rotate(3deg)` + `opacity: 0.5` + 강한 그림자
- DragOverlay 내부 TicketCard에 `isDragging` 스타일 적용

---

## 5. 기술 부채 해소

> Phase 2 구현 전에 정리해야 할 기술 부채 항목이다.

### TD-101: 타입 내보내기 정리

**대상 파일**: `src/shared/types/index.ts`

`COLUMN_ORDER`, `COLUMN_LABELS`가 내보내지지 않아 컴포넌트에서 중복 정의 중이다.
shared/types에서 export 후 컴포넌트에서 import로 통일한다.

---

### TD-102: Validation 보강

**대상 파일**: `src/shared/validations/ticket.ts`

`createTicketSchema`의 `plannedStartDate`에 날짜 형식 검증(regex)이 누락되어 있다.

```typescript
// 현재
plannedStartDate: z.string().optional(),

// 수정
plannedStartDate: z.string().regex(/^\d{4}-\d{2}-\d{2}$/).optional(),
```

---

## 6. 테스트 커버리지 보강

> Phase 1에서 누락된 테스트를 Phase 2 시작 전에 보완한다.

### TC-101: GET /api/tickets/:id 단위 테스트

**누락 항목**:
- 단일 티켓 조회 성공 (200 + 전체 데이터)
- `isOverdue` 파생 필드 포함 검증
- 존재하지 않는 ID → 404 (`TICKET_NOT_FOUND`)

---

### TC-102: 드래그앤드롭 E2E 통합 테스트

**누락 항목**:
- BACKLOG → TODO 칼럼 이동: status 변경 검증
- IN_PROGRESS → DONE 이동: `completedAt` 자동 설정 검증
- 같은 칼럼 내 리오더: position 재계산 검증
- API 실패 시 UI 롤백 검증

---

### TC-103: 반응형 컴포넌트 테스트

**누락 항목**:
- 768px 태블릿 레이아웃 렌더링 검증
- 360px 모바일 탭 레이아웃 렌더링 검증
- `matchMedia()` 모킹을 통한 뷰포트 전환 테스트

---
