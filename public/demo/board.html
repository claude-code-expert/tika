<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tika - ì¹¸ë°˜ ë³´ë“œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    /* ===== ë””ìì¸ í† í° ===== */
    :root {
      --font-display: 'Plus Jakarta Sans', 'Noto Sans KR', sans-serif;
      --font-body: 'Noto Sans KR', 'Plus Jakarta Sans', sans-serif;
      --text-h1: 20px; --text-h2: 16px; --text-body1: 14px; --text-body2: 12px; --text-small: 11px;
      --fw-bold: 700; --fw-semibold: 600; --fw-medium: 500; --fw-regular: 400;
      --bg-app: #F8F9FB; --bg-header: #FFFFFF; --bg-sidebar: #F1F3F6;
      --bg-board: #E8EDF2; --bg-footer: #F4F5F7; --bg-card: #FFFFFF; --bg-column: #F4F5F7;
      --text-primary: #2C3E50; --text-secondary: #5A6B7F; --text-muted: #8993A4;
      --accent-primary: #629584; --accent-hover: #527D6F; --accent-light: #E8F5F0;
      --col-todo: #DBEAFE; --col-inprogress: #FEF3C7; --col-done: #D1FAE5;
      --border-light: #DFE1E6; --border-medium: #C4C9D1;
      --radius-card: 8px; --radius-column: 12px; --radius-button: 6px; --radius-tag: 4px;
      --shadow-card: 0 1px 2px rgba(9,30,66,0.12); --shadow-card-hover: 0 3px 8px rgba(9,30,66,0.18);
      --shadow-dropdown: 0 8px 24px rgba(0,0,0,0.12);
      --z-sidebar: 10; --z-header: 50; --z-modal: 300;
      --header-height: 60px; --footer-height: 55px; --sidebar-width: 260px;
      --column-width: 280px; --filter-bar-height: 48px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-body);
      background: var(--bg-app);
      color: var(--text-primary);
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* ===== í—¤ë” ===== */
    .header {
      height: var(--header-height);
      background: var(--bg-header);
      border-bottom: 1px solid var(--border-light);
      display: flex;
      align-items: center;
      padding: 0 20px;
      gap: 16px;
      flex-shrink: 0;
      position: relative;
      z-index: var(--z-header);
    }
    .header-left { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }
    .logo-icon {
      width: 30px; height: 30px;
      background: var(--accent-primary);
      border-radius: 7px;
      display: flex; align-items: center; justify-content: center;
      color: #fff;
      font-family: var(--font-display);
      font-weight: 700; font-size: 15px;
    }
    .logo-text { font-family: var(--font-display); font-size: 18px; font-weight: 700; color: var(--text-primary); }
    .header-search { flex: 1; max-width: 400px; margin: 0 auto; }
    .search-input {
      width: 100%; height: 34px;
      padding: 0 14px 0 36px;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-button);
      font-size: 13px; font-family: var(--font-body);
      color: var(--text-primary);
      background: var(--bg-app) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' fill='none' viewBox='0 0 24 24'%3E%3Ccircle cx='11' cy='11' r='8' stroke='%238993A4' stroke-width='2'/%3E%3Cpath d='m21 21-4.35-4.35' stroke='%238993A4' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E") 10px center no-repeat;
      outline: none; transition: border-color 0.15s;
    }
    .search-input:focus { border-color: var(--accent-primary); }
    .header-right { display: flex; align-items: center; gap: 8px; margin-left: auto; flex-shrink: 0; }
    .btn-new {
      height: 32px; padding: 0 14px;
      background: var(--accent-primary); color: #fff;
      border: none; border-radius: var(--radius-button);
      font-size: 13px; font-weight: 600; font-family: var(--font-body);
      cursor: pointer; transition: background 0.15s; white-space: nowrap;
    }
    .btn-new:hover { background: var(--accent-hover); }
    .icon-btn {
      width: 32px; height: 32px;
      border: none; background: transparent;
      border-radius: var(--radius-button);
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      color: var(--text-secondary); font-size: 16px;
      transition: background 0.15s; position: relative;
    }
    .icon-btn:hover { background: var(--bg-sidebar); }
    .avatar {
      width: 32px; height: 32px; border-radius: 50%;
      background: var(--accent-primary); color: #fff;
      font-size: 13px; font-weight: 700;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; font-family: var(--font-display);
    }
    .notification-dot {
      position: absolute; top: 6px; right: 6px;
      width: 7px; height: 7px;
      background: #ef4444; border-radius: 50%; border: 1.5px solid #fff;
    }

    /* ===== ë“œë¡­ë‹¤ìš´ ===== */
    .dropdown-wrap { position: relative; }
    .dropdown-menu {
      display: none; position: absolute; top: 40px; right: 0;
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-dropdown);
      min-width: 160px; z-index: 200; padding: 4px;
    }
    .dropdown-menu.show { display: block; }
    .dropdown-item {
      padding: 8px 12px; font-size: 13px;
      color: var(--text-secondary); cursor: pointer;
      border-radius: 4px; transition: background 0.1s;
    }
    .dropdown-item:hover { background: var(--bg-app); color: var(--text-primary); }
    .dropdown-divider { height: 1px; background: var(--border-light); margin: 4px 0; }

    /* ===== ë©”ì¸ ë ˆì´ì•„ì›ƒ ===== */
    .main-area { flex: 1; display: flex; overflow: hidden; }

    /* ===== ì‚¬ì´ë“œë°” ===== */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border-light);
      display: flex; flex-direction: column; flex-shrink: 0;
      transition: width 0.2s ease, opacity 0.2s ease;
      overflow: hidden;
    }
    .sidebar.collapsed { width: 0; opacity: 0; }
    .sidebar-workspace { padding: 16px; border-bottom: 1px solid var(--border-light); }
    .workspace-selector {
      display: flex; align-items: center; gap: 8px;
      padding: 8px 10px; border-radius: var(--radius-button);
      cursor: pointer; transition: background 0.15s;
    }
    .workspace-selector:hover { background: var(--border-light); }
    .workspace-dot {
      width: 24px; height: 24px; background: var(--accent-primary);
      border-radius: var(--radius-button);
      display: flex; align-items: center; justify-content: center;
      color: #fff; font-size: 11px; font-weight: 700; flex-shrink: 0;
    }
    .workspace-name { font-size: 14px; font-weight: 600; color: var(--text-primary); flex: 1; }
    .workspace-arrow { font-size: 10px; color: var(--text-muted); }
    .sidebar-nav { padding: 12px 10px; border-bottom: 1px solid var(--border-light); }
    .nav-item {
      display: flex; align-items: center; gap: 10px;
      padding: 7px 10px; border-radius: 5px;
      font-size: 13px; color: var(--text-secondary);
      cursor: pointer; transition: background 0.1s, color 0.1s;
    }
    .nav-item:hover { background: var(--border-light); color: var(--text-primary); }
    .nav-item.active { background: var(--accent-light); color: var(--accent-primary); font-weight: 600; }
    .nav-item-icon { font-size: 15px; }
    .sidebar-section-title {
      padding: 12px 16px 6px;
      font-size: 11px; font-weight: 600;
      color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.07em;
    }
    .sidebar-tasks { flex: 1; overflow-y: auto; padding: 0 10px 10px; }
    .sidebar-task { padding: 8px 10px; border-radius: 6px; margin-bottom: 4px; cursor: pointer; transition: background 0.1s; }
    .sidebar-task:hover { background: var(--border-light); }
    .sidebar-task-title { font-size: 13px; color: var(--text-primary); margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .sidebar-task-meta { display: flex; align-items: center; gap: 6px; }

    /* ===== ì»¨í…ì¸  ì˜ì—­ ===== */
    .content-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
    .toggle-sidebar-btn {
      position: absolute; left: 0; top: calc(50% - 60px);
      width: 18px; height: 44px;
      background: var(--bg-sidebar);
      border: 1px solid var(--border-medium); border-left: none;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      color: var(--text-muted); font-size: 10px;
      z-index: 10; transition: background 0.15s;
    }
    .toggle-sidebar-btn:hover { background: var(--border-light); color: var(--text-primary); }

    /* ===== í•„í„°ë°” ===== */
    .filter-bar {
      height: var(--filter-bar-height); padding: 0 20px;
      background: var(--bg-header); border-bottom: 1px solid var(--border-light);
      display: flex; align-items: center; gap: 6px; flex-shrink: 0;
    }
    .filter-chip {
      padding: 4px 12px; border-radius: 20px;
      font-size: 12px; font-weight: 500;
      cursor: pointer; border: 1px solid var(--border-light);
      background: var(--bg-card); color: var(--text-secondary);
      transition: all 0.15s; white-space: nowrap;
    }
    .filter-chip:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
    .filter-chip.active { background: var(--accent-primary); color: #fff; border-color: var(--accent-primary); }
    .filter-divider { width: 1px; height: 20px; background: var(--border-light); margin: 0 6px; }

    /* ===== ë³´ë“œ ===== */
    .board-area {
      flex: 1; background: var(--bg-board);
      overflow-x: auto; overflow-y: hidden;
      padding: 20px; display: flex; gap: 16px; align-items: flex-start;
    }
    .column { width: var(--column-width); min-width: var(--column-width); display: flex; flex-direction: column; max-height: 100%; }
    .column-header { display: flex; align-items: center; padding: 8px 12px; border-radius: 8px 8px 0 0; gap: 8px; }
    .column-header.backlog { background: var(--bg-column); }
    .column-header.todo    { background: var(--col-todo); }
    .column-header.inprog  { background: var(--col-inprogress); }
    .column-header.done    { background: var(--col-done); }
    .column-title { font-size: 13px; font-weight: 700; color: var(--text-primary); flex: 1; }
    .column-count { background: rgba(0,0,0,0.08); color: var(--text-secondary); font-size: 11px; font-weight: 600; padding: 2px 7px; border-radius: 10px; }
    .column-add-btn {
      width: 24px; height: 24px; border: none; background: transparent;
      border-radius: 4px; cursor: pointer; color: var(--text-muted); font-size: 16px;
      display: flex; align-items: center; justify-content: center; transition: background 0.1s;
    }
    .column-add-btn:hover { background: rgba(0,0,0,0.07); color: var(--text-primary); }
    .column-body {
      flex: 1; overflow-y: auto; padding: 8px;
      background: rgba(0,0,0,0.02); border-radius: 0 0 8px 8px;
      display: flex; flex-direction: column; gap: 8px; min-height: 100px;
    }

    /* ===== ì¹´ë“œ ===== */
    .ticket-card {
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      border-radius: 7px; padding: 12px;
      box-shadow: var(--shadow-card);
      cursor: pointer; transition: box-shadow 0.15s, border-color 0.15s;
    }
    .ticket-card:hover { box-shadow: var(--shadow-card-hover); border-color: var(--border-medium); }
    .ticket-card.overdue { border: 2px solid #DC2626; }
    .card-labels { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 7px; }
    .issue-tag { display: inline-flex; align-items: center; gap: 4px; font-size: 10px; font-weight: 600; padding: 2px 7px; border-radius: var(--radius-tag); margin-bottom: 6px; }
    .issue-tag.goal    { background: #F3E8FF; color: #8B5CF6; }
    .issue-tag.story   { background: #DBEAFE; color: #3B82F6; }
    .issue-tag.feature { background: #D1FAE5; color: #10B981; }
    .issue-tag.task    { background: #FEF3C7; color: #F59E0B; }
    .label-badge { font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: var(--radius-tag); white-space: nowrap; }
    .label-frontend { background: #2b7fff; color: #fff; }
    .label-backend  { background: #00c950; color: #fff; }
    .label-design   { background: #ad46ff; color: #fff; }
    .label-bug      { background: #fb2c36; color: #fff; }
    .label-docs     { background: #ffac6d; color: #3D2200; }
    .label-infra    { background: #615fff; color: #fff; }
    .card-title { font-size: 13px; font-weight: 600; color: var(--text-primary); line-height: 1.4; margin-bottom: 5px; }
    .card-desc { font-size: 11px; color: var(--text-muted); line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; margin-bottom: 10px; }
    .card-footer { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
    .card-footer-right { margin-left: auto; display: flex; align-items: center; gap: 4px; }
    .priority-badge { font-size: 10px; font-weight: 600; padding: 2px 7px; border-radius: var(--radius-tag); }
    .priority-critical { background: #FEE2E2; color: #DC2626; }
    .priority-high     { background: #FFEDD5; color: #C2410C; }
    .priority-medium   { background: #FEF9C3; color: #A16207; }
    .priority-low      { background: #F3F4F6; color: #6B7280; }
    .due-badge { font-size: 10px; font-weight: 500; padding: 2px 7px; border-radius: var(--radius-tag); display: flex; align-items: center; gap: 3px; }
    .due-badge.normal  { background: #F0FDF4; color: #16A34A; }
    .due-badge.soon    { background: #FEF9C3; color: #A16207; }
    .due-badge.overdue { background: #FEE2E2; color: #DC2626; }
    .checklist-badge { font-size: 10px; color: var(--text-muted); display: flex; align-items: center; gap: 3px; }
    .mini-avatar { width: 22px; height: 22px; border-radius: 50%; font-size: 10px; font-weight: 700; display: flex; align-items: center; justify-content: center; color: #fff; font-family: var(--font-display); }
    .avatar-hong { background: #629584; }
    .avatar-kim  { background: #3B82F6; }
    .avatar-lee  { background: #8B5CF6; }

    /* ===== í‘¸í„° ===== */
    .footer { height: var(--footer-height); background: var(--bg-footer); border-top: 1px solid var(--border-light); display: flex; align-items: center; justify-content: center; font-size: 12px; color: var(--text-muted); flex-shrink: 0; }
    .footer span { color: #e25555; margin: 0 2px; }

    /* ===== ìŠ¤í¬ë¡¤ë°” ===== */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-medium); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #adb5bd; }

    /* ===== ëª¨ë‹¬ ê³µí†µ ===== */
    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.95) translateY(8px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }
    .modal-overlay {
      display: none; position: fixed; inset: 0;
      background: rgba(9,30,66,0.54);
      z-index: var(--z-modal);
      align-items: center; justify-content: center;
      padding: 20px;
    }
    .modal-overlay.open { display: flex; }
    .modal-panel {
      background: var(--bg-card); border-radius: var(--radius-card);
      box-shadow: var(--shadow-dropdown);
      display: flex; flex-direction: column;
      animation: modalIn 0.2s ease-out; overflow: hidden;
      width: 100%; max-height: 92vh;
    }
    .modal-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 16px 20px; border-bottom: 1px solid var(--border-light); flex-shrink: 0;
    }
    .modal-title { font-size: var(--text-h2); font-weight: var(--fw-semibold); color: var(--text-primary); }
    .modal-close {
      width: 30px; height: 30px; border: none; background: transparent;
      border-radius: 4px; cursor: pointer; font-size: 18px; color: var(--text-muted);
      display: flex; align-items: center; justify-content: center; transition: background 0.1s;
    }
    .modal-close:hover { background: var(--bg-app); color: var(--text-primary); }
    .modal-body { flex: 1; overflow-y: auto; padding: 20px; }
    .modal-footer {
      display: flex; align-items: center; justify-content: flex-end;
      gap: 8px; padding: 14px 20px;
      border-top: 1px solid var(--border-light); flex-shrink: 0;
    }
    .btn {
      height: 34px; padding: 0 16px; border-radius: var(--radius-button);
      font-size: 13px; font-weight: 600; font-family: var(--font-body);
      cursor: pointer; border: 1px solid transparent; transition: all 0.15s;
      display: inline-flex; align-items: center; gap: 6px;
    }
    .btn-primary { background: var(--accent-primary); color: #fff; border-color: var(--accent-primary); }
    .btn-primary:hover { background: var(--accent-hover); border-color: var(--accent-hover); }
    .btn-secondary { background: var(--bg-card); color: var(--text-secondary); border-color: var(--border-medium); }
    .btn-secondary:hover { background: var(--bg-app); color: var(--text-primary); }
    .btn-danger { background: #FEE2E2; color: #DC2626; border-color: #FECACA; }
    .btn-danger:hover { background: #DC2626; color: #fff; border-color: #DC2626; }
    .btn-ghost { background: transparent; color: var(--text-secondary); border-color: transparent; }
    .btn-ghost:hover { background: var(--bg-app); color: var(--text-primary); }
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-size: 12px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; }
    .form-input, .form-textarea, .form-select {
      width: 100%; padding: 8px 12px;
      border: 1px solid var(--border-light); border-radius: var(--radius-button);
      font-size: 13px; font-family: var(--font-body); color: var(--text-primary);
      background: var(--bg-card); outline: none; transition: border-color 0.15s;
    }
    .form-input:focus, .form-textarea:focus, .form-select:focus { border-color: var(--accent-primary); }
    .form-textarea { resize: vertical; min-height: 80px; line-height: 1.5; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

    /* ===== ìƒˆ ì—…ë¬´ ëª¨ë‹¬ ===== */
    #newModal .modal-panel { max-width: 560px; }

    /* ì´ìŠˆ íƒ€ì… ì„ íƒ */
    .type-selector { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 16px; }
    .type-btn {
      display: flex; flex-direction: column; align-items: center; gap: 4px;
      padding: 10px 6px; border: 2px solid var(--border-light);
      border-radius: var(--radius-button); cursor: pointer; background: var(--bg-card);
      transition: all 0.15s; font-size: 11px; font-weight: 600; color: var(--text-secondary);
    }
    .type-btn:hover { border-color: var(--border-medium); }
    .type-btn.active { border-color: currentColor; }
    .type-btn.goal    { color: #8B5CF6; } .type-btn.goal.active    { background: #F3E8FF; }
    .type-btn.story   { color: #3B82F6; } .type-btn.story.active   { background: #DBEAFE; }
    .type-btn.feature { color: #10B981; } .type-btn.feature.active { background: #D1FAE5; }
    .type-btn.task    { color: #F59E0B; } .type-btn.task.active    { background: #FEF3C7; }
    .type-icon { font-size: 18px; }

    /* ë¼ë²¨ ì„ íƒ */
    .label-chips { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 8px; }
    .label-chip {
      font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 20px;
      cursor: pointer; border: 2px solid transparent; opacity: 0.5; transition: opacity 0.15s;
    }
    .label-chip.selected { opacity: 1; }
    .label-chip.Frontend { background: #2b7fff; color: #fff; }
    .label-chip.Backend  { background: #00c950; color: #fff; }
    .label-chip.Design   { background: #ad46ff; color: #fff; }
    .label-chip.Bug      { background: #fb2c36; color: #fff; }
    .label-chip.Docs     { background: #ffac6d; color: #3D2200; }
    .label-chip.Infra    { background: #615fff; color: #fff; }

    /* ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¹Œë” */
    .checklist-items { list-style: none; margin-bottom: 8px; }
    .checklist-item { display: flex; align-items: center; gap: 8px; padding: 5px 0; border-bottom: 1px solid var(--border-light); }
    .checklist-item:last-child { border-bottom: none; }
    .checklist-item-text { flex: 1; font-size: 13px; color: var(--text-primary); }
    .checklist-del { background: transparent; border: none; cursor: pointer; color: var(--text-muted); font-size: 14px; padding: 2px 4px; border-radius: 3px; }
    .checklist-del:hover { background: #FEE2E2; color: #DC2626; }
    .checklist-add-row { display: flex; gap: 6px; }
    .checklist-add-input { flex: 1; }

    /* ê³„ì¸µ êµ¬ì¡° ì„ íƒê¸° */
    .cascade-select { display: flex; flex-direction: column; gap: 8px; padding: 12px; background: var(--bg-app); border-radius: var(--radius-button); margin-top: 8px; }
    .cascade-row { display: flex; align-items: center; gap: 8px; }
    .cascade-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

    /* ===== ìƒì„¸ ëª¨ë‹¬ ===== */
    #detailModal .modal-panel { max-width: 720px; }

    .detail-top { padding: 20px 24px 16px; border-bottom: 1px solid var(--border-light); flex-shrink: 0; }
    .detail-top-bar { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 12px; gap: 12px; }
    .detail-label-row { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; flex: 1; }
    .detail-label-item {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: 20px;
    }
    .detail-label-item .remove-label { cursor: pointer; font-size: 10px; opacity: 0.7; transition: opacity 0.1s; }
    .detail-label-item .remove-label:hover { opacity: 1; }
    .btn-add-label {
      font-size: 11px; font-weight: 600; padding: 3px 10px;
      border: 1px dashed var(--border-medium); border-radius: 20px;
      cursor: pointer; background: transparent; color: var(--text-muted);
      transition: all 0.15s; position: relative;
    }
    .btn-add-label:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
    .label-picker-dropdown {
      display: none; position: absolute; top: 28px; left: 0;
      background: var(--bg-card); border: 1px solid var(--border-light);
      border-radius: var(--radius-button); box-shadow: var(--shadow-dropdown);
      padding: 8px; z-index: 10; min-width: 180px;
    }
    .label-picker-dropdown.show { display: block; }
    .label-picker-item {
      display: flex; align-items: center; gap: 8px; padding: 6px 8px;
      border-radius: 4px; cursor: pointer; font-size: 12px;
      font-weight: 600; color: var(--text-primary); transition: background 0.1s;
    }
    .label-picker-item:hover { background: var(--bg-app); }
    .label-color-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    .detail-title { font-size: var(--text-h1); font-weight: var(--fw-bold); color: var(--text-primary); line-height: 1.4; margin-bottom: 10px; }
    .detail-breadcrumb { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; margin-bottom: 10px; }
    .breadcrumb-badge {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 11px; font-weight: 600; padding: 3px 8px; border-radius: var(--radius-tag);
    }
    .breadcrumb-arrow { color: var(--text-muted); font-size: 12px; }
    .btn-edit-crumb { background: transparent; border: 1px solid var(--border-light); border-radius: 4px; padding: 2px 8px; font-size: 11px; cursor: pointer; color: var(--text-muted); transition: all 0.1s; }
    .btn-edit-crumb:hover { border-color: var(--accent-primary); color: var(--accent-primary); }
    .detail-meta-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .meta-badge {
      display: inline-flex; align-items: center; gap: 4px;
      font-size: 11px; font-weight: 600; padding: 4px 10px;
      border-radius: var(--radius-tag);
    }
    .meta-badge.status-backlog   { background: var(--bg-column); color: var(--text-secondary); }
    .meta-badge.status-todo      { background: var(--col-todo); color: #1D4ED8; }
    .meta-badge.status-inprogress { background: var(--col-inprogress); color: #92400E; }
    .meta-badge.status-done      { background: var(--col-done); color: #065F46; }
    .meta-due { background: #FEE2E2; color: #DC2626; }
    .meta-due.normal { background: #F0FDF4; color: #16A34A; }
    .meta-assignee { background: var(--bg-app); color: var(--text-secondary); border: 1px solid var(--border-light); }

    .detail-body { flex: 1; overflow-y: auto; padding: 20px 24px; }
    .section-title { font-size: 12px; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 10px; }
    .section-block { margin-bottom: 24px; }
    .desc-text { font-size: 14px; color: var(--text-primary); line-height: 1.6; }

    /* ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒì„¸ */
    .progress-bar-wrap { background: var(--border-light); border-radius: 4px; height: 6px; margin-bottom: 10px; overflow: hidden; }
    .progress-bar-fill { height: 100%; background: var(--accent-primary); border-radius: 4px; transition: width 0.3s; }
    .detail-checklist { list-style: none; }
    .detail-checklist-item { display: flex; align-items: center; gap: 10px; padding: 7px 0; border-bottom: 1px solid var(--border-light); }
    .detail-checklist-item:last-child { border-bottom: none; }
    .detail-checklist-item input[type="checkbox"] { accent-color: var(--accent-primary); width: 15px; height: 15px; cursor: pointer; flex-shrink: 0; }
    .detail-checklist-item label { flex: 1; font-size: 13px; color: var(--text-primary); cursor: pointer; }
    .detail-checklist-item label.done { text-decoration: line-through; color: var(--text-muted); }
    .detail-checklist-item .del-check { background: transparent; border: none; cursor: pointer; color: var(--text-muted); font-size: 14px; padding: 2px; border-radius: 3px; opacity: 0; transition: opacity 0.1s; }
    .detail-checklist-item:hover .del-check { opacity: 1; }
    .detail-checklist-item .del-check:hover { color: #DC2626; }
    .checklist-add-detail { display: flex; gap: 6px; margin-top: 8px; }

    /* í™œë™ ë‚´ì—­ */
    .activity-list { display: flex; flex-direction: column; gap: 12px; margin-bottom: 14px; }
    .activity-item { display: flex; gap: 10px; }
    .activity-avatar { width: 28px; height: 28px; border-radius: 50%; font-size: 11px; font-weight: 700; display: flex; align-items: center; justify-content: center; color: #fff; font-family: var(--font-display); flex-shrink: 0; }
    .activity-content { flex: 1; }
    .activity-meta { font-size: 11px; color: var(--text-muted); margin-bottom: 4px; }
    .activity-meta strong { color: var(--text-secondary); }
    .activity-bubble { background: var(--bg-app); border: 1px solid var(--border-light); border-radius: 6px; padding: 8px 12px; font-size: 13px; color: var(--text-primary); line-height: 1.5; }
    .comment-row { display: flex; gap: 8px; align-items: flex-start; }
    .comment-input-wrap { flex: 1; }
    .comment-input { width: 100%; padding: 8px 12px; border: 1px solid var(--border-light); border-radius: var(--radius-button); font-size: 13px; font-family: var(--font-body); color: var(--text-primary); background: var(--bg-card); outline: none; resize: none; min-height: 36px; line-height: 1.5; transition: border-color 0.15s; }
    .comment-input:focus { border-color: var(--accent-primary); }

    /* ì¹´í…Œê³ ë¦¬ í¸ì§‘ê¸° */
    .crumb-editor { display: none; margin-top: 10px; padding: 12px; background: var(--bg-app); border-radius: var(--radius-button); border: 1px solid var(--border-light); }
    .crumb-editor.show { display: block; }
    .crumb-editor-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
    .crumb-editor-label { font-size: 12px; font-weight: 600; color: var(--text-secondary); min-width: 50px; }

    /* ìƒ‰ìƒ ìŠ¤ì™€ì¹˜ */
    .color-swatches { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .color-swatch { width: 22px; height: 22px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; transition: transform 0.1s; }
    .color-swatch:hover { transform: scale(1.2); }
    .color-swatch.selected { border-color: var(--text-primary); }
  </style>
</head>
<body>

  <!-- ===== í—¤ë” ===== -->
  <header class="header">
    <div class="header-left">
      <div class="logo-icon">T</div>
      <span class="logo-text">Tika</span>
    </div>
    <div class="header-search">
      <input class="search-input" type="text" placeholder="ì—…ë¬´ ê²€ìƒ‰..." />
    </div>
    <div class="header-right">
      <button class="btn-new" onclick="showNewModal()">+ ìƒˆ ì—…ë¬´</button>
      <button class="icon-btn" title="ì•Œë¦¼" style="position:relative;">
        ğŸ””<span class="notification-dot"></span>
      </button>
      <div class="dropdown-wrap">
        <button class="icon-btn" title="ì„¤ì •" onclick="toggleDropdown('settings-dd')">âš™ï¸</button>
        <div class="dropdown-menu" id="settings-dd">
          <div class="dropdown-item">í”„ë¡œí•„ ì„¤ì •</div>
          <div class="dropdown-item">í…Œë§ˆ ì„¤ì •</div>
          <div class="dropdown-item">ì–¸ì–´ ì„¤ì •</div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item" style="color:#DC2626;">ë¡œê·¸ì•„ì›ƒ</div>
        </div>
      </div>
      <div class="dropdown-wrap">
        <div class="avatar" title="í™ê¸¸ë™" onclick="toggleDropdown('avatar-dd')">í™</div>
        <div class="dropdown-menu" id="avatar-dd">
          <div class="dropdown-item" style="font-weight:600;color:var(--text-primary);">í™ê¸¸ë™</div>
          <div class="dropdown-item" style="font-size:12px;color:var(--text-muted);">hong@example.com</div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item">ë‚´ í”„ë¡œí•„</div>
          <div class="dropdown-item" style="color:#DC2626;">ë¡œê·¸ì•„ì›ƒ</div>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== ë©”ì¸ ì˜ì—­ ===== -->
  <div class="main-area">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-workspace">
        <div class="workspace-selector">
          <div class="workspace-dot">P</div>
          <span class="workspace-name">Project Alpha</span>
          <span class="workspace-arrow">â–¾</span>
        </div>
      </div>
      <div class="sidebar-nav">
        <div class="nav-item active"><span class="nav-item-icon">ğŸ“‹</span> ì¹¸ë°˜ ë³´ë“œ</div>
        <div class="nav-item"><span class="nav-item-icon">ğŸ“…</span> ìº˜ë¦°ë”</div>
        <div class="nav-item"><span class="nav-item-icon">ğŸ“Š</span> ë¦¬í¬íŠ¸</div>
        <div class="nav-item"><span class="nav-item-icon">âš™ï¸</span> ì„¤ì •</div>
      </div>
      <div class="sidebar-section-title">ë‚´ ì—…ë¬´</div>
      <div class="sidebar-tasks">
        <div class="sidebar-task" onclick="handleCardClick('kanban-ui')">
          <div class="sidebar-task-title">ì¹¸ë°˜ ë³´ë“œ UI êµ¬í˜„</div>
          <div class="sidebar-task-meta">
            <span class="priority-badge priority-high" style="font-size:9px;padding:1px 5px;">HIGH</span>
            <span style="font-size:11px;color:var(--text-muted);">ë‚´ì¼ê¹Œì§€</span>
          </div>
        </div>
        <div class="sidebar-task" onclick="handleCardClick('api-doc')">
          <div class="sidebar-task-title">API ì„¤ê³„ ë¬¸ì„œ ì‘ì„±</div>
          <div class="sidebar-task-meta">
            <span class="priority-badge priority-high" style="font-size:9px;padding:1px 5px;">HIGH</span>
            <span style="font-size:11px;color:#DC2626;">1ì¼ ì´ˆê³¼</span>
          </div>
        </div>
        <div class="sidebar-task" onclick="handleCardClick('unit-test')">
          <div class="sidebar-task-title">ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±</div>
          <div class="sidebar-task-meta">
            <span class="priority-badge priority-high" style="font-size:9px;padding:1px 5px;">HIGH</span>
            <span style="font-size:11px;color:var(--text-muted);">2ì¼ í›„</span>
          </div>
        </div>
      </div>
    </aside>

    <div class="content-area">
      <button class="toggle-sidebar-btn" id="toggleSidebarBtn" onclick="toggleSidebar()" title="ì‚¬ì´ë“œë°” ì ‘ê¸°/í¼ì¹˜ê¸°">â—€</button>

      <!-- í•„í„°ë°” -->
      <div class="filter-bar">
        <button class="filter-chip active" onclick="toggleChip(this)">ì „ì²´ 9</button>
        <button class="filter-chip" onclick="toggleChip(this)">ì´ë²ˆ ì£¼ ì—…ë¬´ 3</button>
        <button class="filter-chip" onclick="toggleChip(this)">ì¼ì • ì´ˆê³¼ 1</button>
        <div class="filter-divider"></div>
        <button class="filter-chip" onclick="toggleChip(this)">ë†’ì€ ìš°ì„ ìˆœìœ„</button>
        <button class="filter-chip" onclick="toggleChip(this)">ë‚´ê²Œ í• ë‹¹ë¨</button>
        <button class="filter-chip" onclick="toggleChip(this)">ë¼ë²¨ â–¾</button>
      </div>

      <!-- ë³´ë“œ -->
      <div class="board-area">

        <!-- Backlog -->
        <div class="column">
          <div class="column-header backlog">
            <span class="column-title">Backlog</span>
            <span class="column-count" id="cnt-backlog">3</span>
            <button class="column-add-btn" onclick="showNewModal('BACKLOG')" title="ìƒˆ ì—…ë¬´ ì¶”ê°€">+</button>
          </div>
          <div class="column-body" id="lane-backlog">
            <div class="ticket-card" onclick="handleCardClick('notify-research')">
              <div class="card-labels"><span class="label-badge label-backend">Backend</span></div>
              <div class="card-title">ì•Œë¦¼ ê¸°ëŠ¥ ì¡°ì‚¬</div>
              <div class="card-desc">ì›¹ í‘¸ì‹œ ì•Œë¦¼ ë° ì´ë©”ì¼ ì•Œë¦¼ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ê¸°ìˆ  ìŠ¤íƒì„ ì¡°ì‚¬í•œë‹¤.</div>
              <div class="card-footer">
                <span class="priority-badge priority-low">LOW</span>
                <span class="checklist-badge">â˜‘ 1/2</span>
              </div>
            </div>
            <div class="ticket-card" onclick="handleCardClick('perf-plan')">
              <div class="card-labels"><span class="label-badge label-docs">Docs</span></div>
              <div class="card-title">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê³„íš</div>
              <div class="card-desc">API ì‘ë‹µ ì‹œê°„ ë° ë™ì‹œ ì‚¬ìš©ì ìˆ˜ì— ëŒ€í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±.</div>
              <div class="card-footer"><span class="priority-badge priority-medium">MEDIUM</span></div>
            </div>
            <div class="ticket-card" onclick="handleCardClick('cicd')">
              <div class="card-labels"><span class="label-badge label-infra">Infra</span></div>
              <div class="card-title">CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•</div>
              <div class="card-desc">GitHub Actionsë¥¼ ì´ìš©í•œ ìë™ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•œë‹¤.</div>
              <div class="card-footer"><span class="priority-badge priority-low">LOW</span></div>
            </div>
          </div>
        </div>

        <!-- TODO -->
        <div class="column">
          <div class="column-header todo">
            <span class="column-title">TODO</span>
            <span class="column-count" id="cnt-todo">3</span>
            <button class="column-add-btn" onclick="showNewModal('TODO')" title="ìƒˆ ì—…ë¬´ ì¶”ê°€">+</button>
          </div>
          <div class="column-body" id="lane-todo">
            <div class="ticket-card" onclick="handleCardClick('kanban-ui')">
              <div style="margin-bottom:5px;"><span class="issue-tag feature">[F] ë³´ë“œ UI</span></div>
              <div class="card-labels">
                <span class="label-badge label-frontend">Frontend</span>
                <span class="label-badge label-design">Design</span>
              </div>
              <div class="card-title">ì¹¸ë°˜ ë³´ë“œ UI êµ¬í˜„</div>
              <div class="card-desc">4ë‹¨ê³„ ì›Œí¬í”Œë¡œìš° ì¹¸ë°˜ ë³´ë“œì˜ UI ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•œë‹¤.</div>
              <div class="card-footer">
                <span class="priority-badge priority-high">HIGH</span>
                <span class="due-badge soon">ğŸ“… ë‚´ì¼</span>
                <div class="card-footer-right"><div class="mini-avatar avatar-hong" title="í™ê¸¸ë™">í™</div></div>
              </div>
            </div>
            <div class="ticket-card" onclick="handleCardClick('dnd')">
              <div class="card-labels"><span class="label-badge label-frontend">Frontend</span></div>
              <div class="card-title">ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ êµ¬í˜„</div>
              <div class="card-desc">@dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¹¼ëŸ¼ ê°„ ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.</div>
              <div class="card-footer">
                <span class="priority-badge priority-medium">MEDIUM</span>
                <div class="card-footer-right"><div class="mini-avatar avatar-kim" title="ê¹€ë¯¼ìˆ˜">ê¹€</div></div>
              </div>
            </div>
            <div class="ticket-card" onclick="handleCardClick('unit-test')">
              <div class="card-labels"><span class="label-badge label-docs">Docs</span></div>
              <div class="card-title">ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±</div>
              <div class="card-desc">Jestì™€ Testing Libraryë¥¼ ì´ìš©í•œ ì»´í¬ë„ŒíŠ¸ ë° ìœ í‹¸ í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±.</div>
              <div class="card-footer">
                <span class="priority-badge priority-high">HIGH</span>
                <span class="due-badge normal">ğŸ“… 2ì¼ í›„</span>
                <span class="checklist-badge">â˜‘ 0/3</span>
              </div>
            </div>
          </div>
        </div>

        <!-- In Progress -->
        <div class="column">
          <div class="column-header inprog">
            <span class="column-title">In Progress</span>
            <span class="column-count" id="cnt-inprogress">2</span>
            <button class="column-add-btn" onclick="showNewModal('IN_PROGRESS')" title="ìƒˆ ì—…ë¬´ ì¶”ê°€">+</button>
          </div>
          <div class="column-body" id="lane-inprogress">
            <div class="ticket-card overdue" onclick="handleCardClick('api-doc')">
              <div class="card-labels"><span class="label-badge label-backend">Backend</span></div>
              <div class="card-title">API ì„¤ê³„ ë¬¸ì„œ ì‘ì„±</div>
              <div class="card-desc">REST API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„ ë° ìš”ì²­/ì‘ë‹µ í˜•ì‹ ì •ì˜. OpenAPI ìŠ¤í™ ë¬¸ì„œ ì‘ì„±.</div>
              <div class="card-footer">
                <span class="priority-badge priority-high">HIGH</span>
                <span class="due-badge overdue">âš  1ì¼ ì´ˆê³¼</span>
                <div class="card-footer-right"><div class="mini-avatar avatar-hong" title="í™ê¸¸ë™">í™</div></div>
              </div>
            </div>
            <div class="ticket-card" onclick="handleCardClick('db-schema')">
              <div class="card-labels">
                <span class="label-badge label-backend">Backend</span>
                <span class="label-badge label-infra">Infra</span>
              </div>
              <div class="card-title">DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„</div>
              <div class="card-desc">Drizzle ORMì„ ì´ìš©í•œ PostgreSQL í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„±.</div>
              <div class="card-footer">
                <span class="priority-badge priority-medium">MEDIUM</span>
                <span class="checklist-badge">â˜‘ 2/4</span>
                <div class="card-footer-right"><div class="mini-avatar avatar-lee" title="ì´ì„œì—°">ì´</div></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Done -->
        <div class="column">
          <div class="column-header done">
            <span class="column-title">Done</span>
            <span class="column-count" id="cnt-done">1</span>
            <button class="column-add-btn" onclick="showNewModal('DONE')" title="ìƒˆ ì—…ë¬´ ì¶”ê°€">+</button>
          </div>
          <div class="column-body" id="lane-done">
            <div class="ticket-card" style="opacity:0.75;" onclick="handleCardClick('requirements')">
              <div class="card-labels"><span class="label-badge label-docs">Docs</span></div>
              <div class="card-title" style="text-decoration:line-through;color:var(--text-muted);">í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ì •ë¦¬</div>
              <div class="card-desc">PRD, TRD, ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ ì‘ì„± ì™„ë£Œ. íŒ€ ë¦¬ë·° í†µê³¼.</div>
              <div class="card-footer">
                <span class="priority-badge priority-high">HIGH</span>
                <span class="due-badge normal" style="background:#D1FAE5;color:#065F46;">âœ“ ì™„ë£Œ</span>
              </div>
            </div>
          </div>
        </div>

      </div><!-- /board-area -->
    </div><!-- /content-area -->
  </div><!-- /main-area -->

  <footer class="footer">
    &copy; 2026 Tika. All rights reserved. &nbsp;|&nbsp; Built with <span>â™¥</span> by CodeVillain
  </footer>

  <!-- ================================================================ -->
  <!-- ìƒˆ ì—…ë¬´ ìƒì„± ëª¨ë‹¬                                                  -->
  <!-- ================================================================ -->
  <div class="modal-overlay" id="newModal" onclick="overlayClick(event,'newModal')">
    <div class="modal-panel" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-title">ìƒˆ ì—…ë¬´ ìƒì„±</span>
        <button class="modal-close" onclick="closeNewModal()">âœ•</button>
      </div>
      <div class="modal-body">

        <!-- ì´ìŠˆ íƒ€ì… -->
        <div class="form-group">
          <div class="form-label">ì´ìŠˆ íƒ€ì…</div>
          <div class="type-selector">
            <button class="type-btn goal" data-type="Goal" onclick="selectType(this)">
              <span class="type-icon">ğŸ¯</span>Goal
            </button>
            <button class="type-btn story" data-type="Story" onclick="selectType(this)">
              <span class="type-icon">ğŸ“–</span>Story
            </button>
            <button class="type-btn feature active" data-type="Feature" onclick="selectType(this)">
              <span class="type-icon">âš¡</span>Feature
            </button>
            <button class="type-btn task" data-type="Task" onclick="selectType(this)">
              <span class="type-icon">âœ…</span>Task
            </button>
          </div>
        </div>

        <!-- ì œëª© -->
        <div class="form-group">
          <label class="form-label" for="newTitle">ì œëª© <span style="color:#DC2626;">*</span></label>
          <input class="form-input" type="text" id="newTitle" placeholder="ì—…ë¬´ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 200ì)" maxlength="200" />
        </div>

        <!-- ì„¤ëª… -->
        <div class="form-group">
          <label class="form-label" for="newDesc">ì„¤ëª…</label>
          <textarea class="form-textarea" id="newDesc" placeholder="ì—…ë¬´ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
        </div>

        <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
        <div class="form-group">
          <div class="form-label">ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
          <ul class="checklist-items" id="newChecklistItems"></ul>
          <div class="checklist-add-row">
            <input class="form-input checklist-add-input" type="text" id="newChecklistInput" placeholder="í•­ëª© ì¶”ê°€ í›„ Enter" />
            <button class="btn btn-secondary" onclick="addChecklistItem()">ì¶”ê°€</button>
          </div>
        </div>

        <!-- ë¼ë²¨ -->
        <div class="form-group">
          <div class="form-label">ë¼ë²¨</div>
          <div class="label-chips" id="newLabelChips">
            <span class="label-chip Frontend" onclick="toggleLabelChip(this)">Frontend</span>
            <span class="label-chip Backend"  onclick="toggleLabelChip(this)">Backend</span>
            <span class="label-chip Design"   onclick="toggleLabelChip(this)">Design</span>
            <span class="label-chip Bug"      onclick="toggleLabelChip(this)">Bug</span>
            <span class="label-chip Docs"     onclick="toggleLabelChip(this)">Docs</span>
            <span class="label-chip Infra"    onclick="toggleLabelChip(this)">Infra</span>
          </div>
        </div>

        <!-- ê³„ì¸µ êµ¬ì¡° (Goal ì œì™¸ ì‹œ í‘œì‹œ) -->
        <div class="form-group" id="cascadeGroup">
          <div class="form-label">ê³„ì¸µ êµ¬ì¡°</div>
          <div class="cascade-select">
            <div class="cascade-row">
              <span class="cascade-dot" style="background:#8B5CF6;"></span>
              <span style="font-size:12px;color:var(--text-muted);min-width:50px;">Goal</span>
              <select class="form-select" id="cascadeGoal" style="flex:1;" onchange="updateCascade()">
                <option value="">Goal ì„ íƒ...</option>
                <option>Tika MVP ì¶œì‹œ</option>
                <option>ì‚¬ìš©ì ê²½í—˜ ê°œì„ </option>
              </select>
            </div>
            <div class="cascade-row" id="cascadeStoryRow">
              <span class="cascade-dot" style="background:#3B82F6;"></span>
              <span style="font-size:12px;color:var(--text-muted);min-width:50px;">Story</span>
              <select class="form-select" id="cascadeStory" style="flex:1;" onchange="updateCascade()">
                <option value="">Story ì„ íƒ...</option>
                <option>ì¹¸ë°˜ ë³´ë“œ êµ¬í˜„</option>
                <option>API ê°œë°œ</option>
              </select>
            </div>
            <div class="cascade-row" id="cascadeFeatureRow">
              <span class="cascade-dot" style="background:#10B981;"></span>
              <span style="font-size:12px;color:var(--text-muted);min-width:50px;">Feature</span>
              <select class="form-select" id="cascadeFeature" style="flex:1;">
                <option value="">Feature ì„ íƒ...</option>
                <option>ë³´ë“œ UI ì»´í¬ë„ŒíŠ¸</option>
                <option>ë“œë˜ê·¸ì•¤ë“œë¡­</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ìƒíƒœ / ìš°ì„ ìˆœìœ„ -->
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="newStatus">ìƒíƒœ</label>
            <select class="form-select" id="newStatus">
              <option value="BACKLOG">Backlog</option>
              <option value="TODO">TODO</option>
              <option value="IN_PROGRESS">In Progress</option>
              <option value="DONE">Done</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label" for="newPriority">ìš°ì„ ìˆœìœ„</label>
            <select class="form-select" id="newPriority">
              <option value="CRITICAL">CRITICAL</option>
              <option value="HIGH">HIGH</option>
              <option value="MEDIUM" selected>MEDIUM</option>
              <option value="LOW">LOW</option>
            </select>
          </div>
        </div>

        <!-- ë§ˆê°ì¼ / ë‹´ë‹¹ì -->
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="newDueDate">ë§ˆê°ì¼</label>
            <input class="form-input" type="date" id="newDueDate" />
          </div>
          <div class="form-group">
            <label class="form-label" for="newAssignee">ë‹´ë‹¹ì</label>
            <select class="form-select" id="newAssignee">
              <option value="">ë‹´ë‹¹ì ì—†ìŒ</option>
              <option value="í™">í™ê¸¸ë™</option>
              <option value="ê¹€">ê¹€ë¯¼ìˆ˜</option>
              <option value="ì´">ì´ì„œì—°</option>
            </select>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeNewModal()">ì·¨ì†Œ</button>
        <button class="btn btn-primary" onclick="handleSubmit()">ì—…ë¬´ ìƒì„±</button>
      </div>
    </div>
  </div>

  <!-- ================================================================ -->
  <!-- ìƒì„¸ ëª¨ë‹¬                                                          -->
  <!-- ================================================================ -->
  <div class="modal-overlay" id="detailModal" onclick="overlayClick(event,'detailModal')">
    <div class="modal-panel" onclick="event.stopPropagation()">

      <!-- ìƒë‹¨ ì˜ì—­ -->
      <div class="detail-top">
        <div class="detail-top-bar">
          <div class="detail-label-row" id="detailLabels"></div>
          <div style="display:flex;align-items:center;gap:6px;flex-shrink:0;">
            <div style="position:relative;">
              <button class="btn-add-label" id="btnAddLabel" onclick="toggleLabelPicker()">+ ë¼ë²¨ ì¶”ê°€</button>
              <div class="label-picker-dropdown" id="labelPickerDd">
                <div class="label-picker-item" onclick="addDetailLabel('Frontend','#2b7fff','#fff')">
                  <span class="label-color-dot" style="background:#2b7fff;"></span>Frontend
                </div>
                <div class="label-picker-item" onclick="addDetailLabel('Backend','#00c950','#fff')">
                  <span class="label-color-dot" style="background:#00c950;"></span>Backend
                </div>
                <div class="label-picker-item" onclick="addDetailLabel('Design','#ad46ff','#fff')">
                  <span class="label-color-dot" style="background:#ad46ff;"></span>Design
                </div>
                <div class="label-picker-item" onclick="addDetailLabel('Bug','#fb2c36','#fff')">
                  <span class="label-color-dot" style="background:#fb2c36;"></span>Bug
                </div>
                <div class="label-picker-item" onclick="addDetailLabel('Docs','#ffac6d','#3D2200')">
                  <span class="label-color-dot" style="background:#ffac6d;"></span>Docs
                </div>
                <div class="label-picker-item" onclick="addDetailLabel('Infra','#615fff','#fff')">
                  <span class="label-color-dot" style="background:#615fff;"></span>Infra
                </div>
              </div>
            </div>
            <button class="modal-close" onclick="closeDetailModal()">âœ•</button>
          </div>
        </div>

        <h2 class="detail-title" id="detailTitle">ì—…ë¬´ ì œëª©</h2>

        <!-- ì¹´í…Œê³ ë¦¬ ë¸Œë ˆë“œí¬ëŸ¼ -->
        <div class="detail-breadcrumb" id="detailBreadcrumb"></div>

        <!-- ì¹´í…Œê³ ë¦¬ í¸ì§‘ê¸° -->
        <div class="crumb-editor" id="crumbEditor">
          <div class="crumb-editor-row">
            <span class="crumb-editor-label">Goal</span>
            <select class="form-select" style="flex:1;">
              <option>Tika MVP ì¶œì‹œ</option><option>ì‚¬ìš©ì ê²½í—˜ ê°œì„ </option>
            </select>
          </div>
          <div class="crumb-editor-row">
            <span class="crumb-editor-label">Story</span>
            <select class="form-select" style="flex:1;">
              <option>ì¹¸ë°˜ ë³´ë“œ êµ¬í˜„</option><option>API ê°œë°œ</option>
            </select>
          </div>
          <div class="crumb-editor-row">
            <span class="crumb-editor-label">Feature</span>
            <select class="form-select" style="flex:1;">
              <option>ë³´ë“œ UI ì»´í¬ë„ŒíŠ¸</option><option>ë“œë˜ê·¸ì•¤ë“œë¡­</option>
            </select>
          </div>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button class="btn btn-primary" style="height:28px;font-size:12px;" onclick="saveCrumb()">ì €ì¥</button>
            <button class="btn btn-secondary" style="height:28px;font-size:12px;" onclick="cancelCrumb()">ì·¨ì†Œ</button>
          </div>
        </div>

        <!-- ë©”íƒ€ ì •ë³´ -->
        <div class="detail-meta-row" id="detailMeta"></div>
      </div>

      <!-- ë³¸ë¬¸ -->
      <div class="detail-body">

        <!-- ì„¤ëª… -->
        <div class="section-block">
          <div class="section-title">ì„¤ëª…</div>
          <div class="desc-text" id="detailDesc">ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.</div>
        </div>

        <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
        <div class="section-block" id="detailChecklistBlock">
          <div class="section-title" id="detailChecklistTitle">ì²´í¬ë¦¬ìŠ¤íŠ¸ (0/0)</div>
          <div class="progress-bar-wrap">
            <div class="progress-bar-fill" id="detailProgressBar" style="width:0%;"></div>
          </div>
          <ul class="detail-checklist" id="detailChecklistItems"></ul>
          <div class="checklist-add-detail">
            <input class="form-input checklist-add-input" type="text" id="detailCheckInput" placeholder="í•­ëª© ì¶”ê°€ í›„ Enter" />
            <button class="btn btn-secondary" onclick="addDetailCheckItem()">ì¶”ê°€</button>
          </div>
        </div>

        <!-- í™œë™ ë‚´ì—­ -->
        <div class="section-block">
          <div class="section-title">í™œë™ ë‚´ì—­</div>
          <div class="activity-list" id="activityList"></div>
          <div class="comment-row">
            <div class="mini-avatar avatar-hong" style="width:28px;height:28px;font-size:11px;">í™</div>
            <div class="comment-input-wrap">
              <textarea class="comment-input" id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="1"></textarea>
            </div>
            <button class="btn btn-primary" style="height:34px;" onclick="submitComment()">ë“±ë¡</button>
          </div>
        </div>

      </div>

      <!-- í‘¸í„° -->
      <div class="modal-footer" style="justify-content:space-between;">
        <button class="btn btn-danger" onclick="deleteCurrentCard()">ì‚­ì œ</button>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-ghost" onclick="duplicateCard()">ë³µì œ</button>
          <button class="btn btn-ghost" onclick="moveCard()">ì´ë™</button>
          <button class="btn btn-secondary" onclick="editCard()">í¸ì§‘</button>
        </div>
      </div>

    </div>
  </div>

  <!-- ================================================================ -->
  <!-- JavaScript                                                         -->
  <!-- ================================================================ -->
  <script>
    /* ------------------------------------------------------------------ */
    /* ì¹´ë“œ ë°ì´í„°                                                          */
    /* ------------------------------------------------------------------ */
    const CARDS = {
      'notify-research': {
        title: 'ì•Œë¦¼ ê¸°ëŠ¥ ì¡°ì‚¬',
        desc: 'ì›¹ í‘¸ì‹œ ì•Œë¦¼ ë° ì´ë©”ì¼ ì•Œë¦¼ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ê¸°ìˆ  ìŠ¤íƒì„ ì¡°ì‚¬í•œë‹¤. Firebase Cloud Messaging, Web Push API, SendGrid ë“±ì˜ ì˜µì…˜ì„ ë¹„êµ ë¶„ì„í•œë‹¤.',
        labels: [{ name:'Backend', bg:'#00c950', color:'#fff' }],
        status: 'BACKLOG', priority: 'LOW',
        due: null, assignee: null,
        checklist: [{ text:'FCM ì¡°ì‚¬', done:true },{ text:'SendGrid ê²€í† ', done:false }],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'S', label:'ì•Œë¦¼ ì‹œìŠ¤í…œ', bg:'#DBEAFE', color:'#3B82F6' },
          { type:'T', label:'ì•Œë¦¼ ê¸°ëŠ¥ ì¡°ì‚¬', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: [
          { who:'ê¹€ë¯¼ìˆ˜', whoAvatar:'ê¹€', avatarBg:'#3B82F6', time:'2ì¼ ì „', msg:'ë°±ì—”ë“œ ì¡°ì‚¬ í•­ëª©ì„ 2ê°œë¡œ ë‚˜ëˆ´ì–´ìš”.' }
        ]
      },
      'perf-plan': {
        title: 'ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê³„íš',
        desc: 'API ì‘ë‹µ ì‹œê°„ ë° ë™ì‹œ ì‚¬ìš©ì ìˆ˜ì— ëŒ€í•œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‘ì„±í•œë‹¤. k6, Locust ë“±ì˜ ë„êµ¬ë¥¼ í™œìš©í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê³„íš ìˆ˜ë¦½.',
        labels: [{ name:'Docs', bg:'#ffac6d', color:'#3D2200' }],
        status: 'BACKLOG', priority: 'MEDIUM',
        due: null, assignee: null,
        checklist: [],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'T', label:'ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê³„íš', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: []
      },
      'cicd': {
        title: 'CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•',
        desc: 'GitHub Actionsë¥¼ ì´ìš©í•œ ìë™ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•œë‹¤. main ë¸Œëœì¹˜ ë¨¸ì§€ ì‹œ Vercel ìë™ ë°°í¬ê¹Œì§€ ì—°ê²°í•œë‹¤.',
        labels: [{ name:'Infra', bg:'#615fff', color:'#fff' }],
        status: 'BACKLOG', priority: 'LOW',
        due: null, assignee: null,
        checklist: [],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'T', label:'CI/CD êµ¬ì¶•', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: []
      },
      'kanban-ui': {
        title: 'ì¹¸ë°˜ ë³´ë“œ UI êµ¬í˜„',
        desc: '4ë‹¨ê³„ ì›Œí¬í”Œë¡œìš° ì¹¸ë°˜ ë³´ë“œì˜ UI ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•œë‹¤. Backlog / TODO / In Progress / Done ì¹¼ëŸ¼, ì¹´ë“œ ë Œë”ë§, ì¹¼ëŸ¼ í—¤ë” ë° í•„í„°ë°”ë¥¼ í¬í•¨í•œë‹¤.',
        labels: [
          { name:'Frontend', bg:'#2b7fff', color:'#fff' },
          { name:'Design', bg:'#ad46ff', color:'#fff' }
        ],
        status: 'TODO', priority: 'HIGH',
        due: 'ë‚´ì¼', assignee: 'í™',
        checklist: [],
        type: 'Feature',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'S', label:'ì¹¸ë°˜ ë³´ë“œ êµ¬í˜„', bg:'#DBEAFE', color:'#3B82F6' },
          { type:'F', label:'ë³´ë“œ UI ì»´í¬ë„ŒíŠ¸', bg:'#D1FAE5', color:'#10B981' },
          { type:'T', label:'ì¹¸ë°˜ ë³´ë“œ UI êµ¬í˜„', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: [
          { who:'í™ê¸¸ë™', whoAvatar:'í™', avatarBg:'#629584', time:'1ì¼ ì „', msg:'ë””ìì¸ ì‹œìŠ¤í…œ í† í°ì„ ë°˜ì˜í•´ì„œ ì‘ì—… ì‹œì‘í–ˆìŠµë‹ˆë‹¤.' },
          { who:'ì´ì„œì—°', whoAvatar:'ì´', avatarBg:'#8B5CF6', time:'ì˜¤ëŠ˜', msg:'ì»¬ëŸ¼ ìƒ‰ìƒ ìŠ¤í™ í™•ì¸ ì™„ë£Œ. LGTM!' }
        ]
      },
      'dnd': {
        title: 'ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ êµ¬í˜„',
        desc: '@dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¹¼ëŸ¼ ê°„ ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤. Optimistic UI ì—…ë°ì´íŠ¸ì™€ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± íŒ¨í„´ë„ í¬í•¨í•œë‹¤.',
        labels: [{ name:'Frontend', bg:'#2b7fff', color:'#fff' }],
        status: 'TODO', priority: 'MEDIUM',
        due: null, assignee: 'ê¹€',
        checklist: [],
        type: 'Feature',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'S', label:'ì¹¸ë°˜ ë³´ë“œ êµ¬í˜„', bg:'#DBEAFE', color:'#3B82F6' },
          { type:'F', label:'ë“œë˜ê·¸ì•¤ë“œë¡­', bg:'#D1FAE5', color:'#10B981' }
        ],
        activity: [
          { who:'ê¹€ë¯¼ìˆ˜', whoAvatar:'ê¹€', avatarBg:'#3B82F6', time:'ì–´ì œ', msg:'@dnd-kit 6.x ê¸°ì¤€ìœ¼ë¡œ ì‘ì—… ì§„í–‰í•©ë‹ˆë‹¤.' }
        ]
      },
      'unit-test': {
        title: 'ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±',
        desc: 'Jestì™€ @testing-library/reactë¥¼ ì´ìš©í•œ ì»´í¬ë„ŒíŠ¸ ë° ìœ í‹¸ í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±. ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒì„ ëª©í‘œë¡œ í•œë‹¤.',
        labels: [{ name:'Docs', bg:'#ffac6d', color:'#3D2200' }],
        status: 'TODO', priority: 'HIGH',
        due: '2ì¼ í›„', assignee: null,
        checklist: [
          { text:'BoardContainer í…ŒìŠ¤íŠ¸', done:false },
          { text:'useTickets í›… í…ŒìŠ¤íŠ¸', done:false },
          { text:'ìœ í‹¸ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸', done:false }
        ],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'T', label:'ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: []
      },
      'api-doc': {
        title: 'API ì„¤ê³„ ë¬¸ì„œ ì‘ì„±',
        desc: 'REST API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„ ë° ìš”ì²­/ì‘ë‹µ í˜•ì‹ ì •ì˜. OpenAPI 3.0 ìŠ¤í™ ë¬¸ì„œ ì‘ì„± ë° Swagger UI ì—°ë™.',
        labels: [{ name:'Backend', bg:'#00c950', color:'#fff' }],
        status: 'IN_PROGRESS', priority: 'HIGH',
        due: '1ì¼ ì´ˆê³¼', assignee: 'í™', overdue: true,
        checklist: [],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'S', label:'API ê°œë°œ', bg:'#DBEAFE', color:'#3B82F6' },
          { type:'T', label:'API ì„¤ê³„ ë¬¸ì„œ', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: [
          { who:'í™ê¸¸ë™', whoAvatar:'í™', avatarBg:'#629584', time:'2ì¼ ì „', msg:'í‹°ì¼“ CRUD API ìŠ¤í™ ì´ˆì•ˆ ì‘ì„± ì™„ë£Œ.' },
          { who:'ì´ì„œì—°', whoAvatar:'ì´', avatarBg:'#8B5CF6', time:'1ì¼ ì „', msg:'reorder ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.' }
        ]
      },
      'db-schema': {
        title: 'DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„',
        desc: 'Drizzle ORMì„ ì´ìš©í•œ PostgreSQL í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„±. tickets í…Œì´ë¸”, ì¸ë±ìŠ¤, ì œì•½ ì¡°ê±´ í¬í•¨.',
        labels: [
          { name:'Backend', bg:'#00c950', color:'#fff' },
          { name:'Infra', bg:'#615fff', color:'#fff' }
        ],
        status: 'IN_PROGRESS', priority: 'MEDIUM',
        due: null, assignee: 'ì´',
        checklist: [
          { text:'tickets í…Œì´ë¸” ì •ì˜', done:true },
          { text:'ì¸ë±ìŠ¤ ì„¤ê³„', done:true },
          { text:'ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸', done:false },
          { text:'ì‹œë“œ ë°ì´í„° ì‘ì„±', done:false }
        ],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'S', label:'API ê°œë°œ', bg:'#DBEAFE', color:'#3B82F6' },
          { type:'T', label:'DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: [
          { who:'ì´ì„œì—°', whoAvatar:'ì´', avatarBg:'#8B5CF6', time:'3ì¼ ì „', msg:'Drizzle ìŠ¤í‚¤ë§ˆ ì´ˆì•ˆ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ë¦¬ë·° ë¶€íƒë“œë ¤ìš”.' }
        ]
      },
      'requirements': {
        title: 'í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ì •ë¦¬',
        desc: 'PRD, TRD, ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ ì‘ì„± ì™„ë£Œ. íŒ€ ë¦¬ë·° í†µê³¼. REQUIREMENTS.md, PRD.md, TRD.md ë¬¸ì„œ ì™„ì„±.',
        labels: [{ name:'Docs', bg:'#ffac6d', color:'#3D2200' }],
        status: 'DONE', priority: 'HIGH',
        due: null, assignee: null, done: true,
        checklist: [
          { text:'PRD ì‘ì„±', done:true },
          { text:'TRD ì‘ì„±', done:true },
          { text:'íŒ€ ë¦¬ë·°', done:true }
        ],
        type: 'Task',
        breadcrumb: [
          { type:'G', label:'Tika MVP ì¶œì‹œ', bg:'#F3E8FF', color:'#8B5CF6' },
          { type:'T', label:'ìš”êµ¬ì‚¬í•­ ì •ë¦¬', bg:'#FEF3C7', color:'#F59E0B' }
        ],
        activity: [
          { who:'í™ê¸¸ë™', whoAvatar:'í™', avatarBg:'#629584', time:'5ì¼ ì „', msg:'ìš”êµ¬ì‚¬í•­ ë¬¸ì„œ ì´ˆì•ˆ ì™„ì„±. íŒ€ ê²€í†  ìš”ì²­.' },
          { who:'ê¹€ë¯¼ìˆ˜', whoAvatar:'ê¹€', avatarBg:'#3B82F6', time:'4ì¼ ì „', msg:'ë¦¬ë·° ì™„ë£Œ. LGTM!' }
        ]
      }
    };

    let currentCardId = null;

    /* ------------------------------------------------------------------ */
    /* ì‚¬ì´ë“œë°”                                                             */
    /* ------------------------------------------------------------------ */
    let sidebarOpen = true;
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const btn = document.getElementById('toggleSidebarBtn');
      sidebarOpen = !sidebarOpen;
      sidebar.classList.toggle('collapsed', !sidebarOpen);
      btn.textContent = sidebarOpen ? 'â—€' : 'â–¶';
      btn.title = sidebarOpen ? 'ì‚¬ì´ë“œë°” ì ‘ê¸°' : 'ì‚¬ì´ë“œë°” í¼ì¹˜ê¸°';
    }

    /* ------------------------------------------------------------------ */
    /* í•„í„° ì¹©                                                              */
    /* ------------------------------------------------------------------ */
    function toggleChip(el) { el.classList.toggle('active'); }

    /* ------------------------------------------------------------------ */
    /* ë“œë¡­ë‹¤ìš´                                                             */
    /* ------------------------------------------------------------------ */
    function toggleDropdown(id) {
      const menu = document.getElementById(id);
      const isOpen = menu.classList.contains('show');
      document.querySelectorAll('.dropdown-menu').forEach(m => m.classList.remove('show'));
      if (!isOpen) menu.classList.add('show');
    }
    document.addEventListener('click', e => {
      if (!e.target.closest('[onclick*="toggleDropdown"]') && !e.target.closest('.dropdown-menu')) {
        document.querySelectorAll('.dropdown-menu').forEach(m => m.classList.remove('show'));
      }
      if (!e.target.closest('#btnAddLabel') && !e.target.closest('#labelPickerDd')) {
        const dd = document.getElementById('labelPickerDd');
        if (dd) dd.classList.remove('show');
      }
    });

    /* ------------------------------------------------------------------ */
    /* ìƒˆ ì—…ë¬´ ëª¨ë‹¬                                                         */
    /* ------------------------------------------------------------------ */
    function showNewModal(status) {
      const overlay = document.getElementById('newModal');
      if (status) document.getElementById('newStatus').value = status;
      overlay.classList.add('open');
    }

    function closeNewModal() {
      document.getElementById('newModal').classList.remove('open');
      resetNewForm();
    }

    function resetNewForm() {
      document.getElementById('newTitle').value = '';
      document.getElementById('newDesc').value = '';
      document.getElementById('newDueDate').value = '';
      document.getElementById('newAssignee').value = '';
      document.getElementById('newStatus').value = 'BACKLOG';
      document.getElementById('newPriority').value = 'MEDIUM';
      document.getElementById('newChecklistItems').innerHTML = '';
      document.getElementById('newChecklistInput').value = '';
      document.querySelectorAll('#newLabelChips .label-chip').forEach(c => c.classList.remove('selected'));
      document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
      document.querySelector('.type-btn.feature').classList.add('active');
      document.getElementById('cascadeGroup').style.display = '';
    }

    function selectType(btn) {
      document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      const type = btn.dataset.type;
      const cascadeGroup = document.getElementById('cascadeGroup');
      const storyRow = document.getElementById('cascadeStoryRow');
      const featureRow = document.getElementById('cascadeFeatureRow');
      cascadeGroup.style.display = (type === 'Goal') ? 'none' : '';
      storyRow.style.display = (type === 'Story') ? 'none' : '';
      featureRow.style.display = (type === 'Feature' || type === 'Task') ? '' : 'none';
    }

    function toggleLabelChip(el) { el.classList.toggle('selected'); }

    function updateCascade() {}

    function addChecklistItem() {
      const input = document.getElementById('newChecklistInput');
      const text = input.value.trim();
      if (!text) return;
      const li = document.createElement('li');
      li.className = 'checklist-item';
      li.innerHTML = `
        <input type="checkbox" disabled />
        <span class="checklist-item-text">${escHtml(text)}</span>
        <button class="checklist-del" onclick="this.closest('li').remove()">âœ•</button>
      `;
      document.getElementById('newChecklistItems').appendChild(li);
      input.value = '';
      input.focus();
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('newChecklistInput').addEventListener('keydown', e => {
        if (e.key === 'Enter') { e.preventDefault(); addChecklistItem(); }
      });
      document.getElementById('detailCheckInput').addEventListener('keydown', e => {
        if (e.key === 'Enter') { e.preventDefault(); addDetailCheckItem(); }
      });
      document.getElementById('commentInput').addEventListener('keydown', e => {
        if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); submitComment(); }
      });
    });

    function handleSubmit() {
      const title = document.getElementById('newTitle').value.trim();
      if (!title) {
        document.getElementById('newTitle').focus();
        document.getElementById('newTitle').style.borderColor = '#DC2626';
        setTimeout(() => { document.getElementById('newTitle').style.borderColor = ''; }, 2000);
        return;
      }

      const status = document.getElementById('newStatus').value;
      const priority = document.getElementById('newPriority').value;
      const dueDate = document.getElementById('newDueDate').value;
      const assignee = document.getElementById('newAssignee').value;
      const selectedLabels = [];
      document.querySelectorAll('#newLabelChips .label-chip.selected').forEach(c => {
        const name = c.textContent.trim();
        const styles = { Frontend:['#2b7fff','#fff'], Backend:['#00c950','#fff'], Design:['#ad46ff','#fff'], Bug:['#fb2c36','#fff'], Docs:['#ffac6d','#3D2200'], Infra:['#615fff','#fff'] };
        selectedLabels.push({ name, bg: styles[name][0], color: styles[name][1] });
      });
      const checklist = [];
      document.querySelectorAll('#newChecklistItems .checklist-item').forEach(li => {
        checklist.push({ text: li.querySelector('.checklist-item-text').textContent, done: false });
      });
      const activeType = document.querySelector('.type-btn.active');
      const type = activeType ? activeType.dataset.type : 'Task';

      const laneMap = { BACKLOG:'lane-backlog', TODO:'lane-todo', IN_PROGRESS:'lane-inprogress', DONE:'lane-done' };
      const cntMap  = { BACKLOG:'cnt-backlog', TODO:'cnt-todo', IN_PROGRESS:'cnt-inprogress', DONE:'cnt-done' };

      const cardId = 'card-' + Date.now();
      const priorityClasses = { CRITICAL:'priority-critical', HIGH:'priority-high', MEDIUM:'priority-medium', LOW:'priority-low' };
      const priorityClass = priorityClasses[priority] || 'priority-medium';

      let labelsHtml = selectedLabels.map(l =>
        `<span class="label-badge" style="background:${l.bg};color:${l.color};">${escHtml(l.name)}</span>`
      ).join('');

      let dueBadgeHtml = '';
      if (dueDate) {
        const today = new Date(); today.setHours(0,0,0,0);
        const due = new Date(dueDate); due.setHours(0,0,0,0);
        const diff = Math.round((due - today) / 86400000);
        const cls = diff < 0 ? 'overdue' : diff <= 2 ? 'soon' : 'normal';
        const label = diff < 0 ? `âš  ${Math.abs(diff)}ì¼ ì´ˆê³¼` : diff === 0 ? 'ğŸ“… ì˜¤ëŠ˜' : diff === 1 ? 'ğŸ“… ë‚´ì¼' : `ğŸ“… ${diff}ì¼ í›„`;
        dueBadgeHtml = `<span class="due-badge ${cls}">${label}</span>`;
      }

      let assigneeHtml = '';
      const avatarMap = { 'í™':'avatar-hong', 'ê¹€':'avatar-kim', 'ì´':'avatar-lee' };
      if (assignee) {
        assigneeHtml = `<div class="card-footer-right"><div class="mini-avatar ${avatarMap[assignee] || ''}" title="${escHtml(assignee)}">${escHtml(assignee)}</div></div>`;
      }

      const checkDone = checklist.filter(c => c.done).length;
      const checklistHtml = checklist.length > 0
        ? `<span class="checklist-badge">â˜‘ ${checkDone}/${checklist.length}</span>` : '';

      const cardHtml = `
        <div class="ticket-card" id="${cardId}" onclick="handleCardClick('${cardId}')">
          ${selectedLabels.length ? `<div class="card-labels">${labelsHtml}</div>` : ''}
          <div class="card-title">${escHtml(title)}</div>
          <div class="card-footer">
            <span class="priority-badge ${priorityClass}">${priority}</span>
            ${dueBadgeHtml}
            ${checklistHtml}
            ${assigneeHtml}
          </div>
        </div>
      `;

      CARDS[cardId] = {
        title, desc: document.getElementById('newDesc').value.trim(),
        labels: selectedLabels, status, priority, due: dueDate, assignee, checklist, type,
        breadcrumb: [], activity: [], _new: true
      };

      const lane = document.getElementById(laneMap[status]);
      lane.insertAdjacentHTML('afterbegin', cardHtml);

      const cnt = document.getElementById(cntMap[status]);
      cnt.textContent = parseInt(cnt.textContent) + 1;

      closeNewModal();
    }

    /* ------------------------------------------------------------------ */
    /* ìƒì„¸ ëª¨ë‹¬                                                            */
    /* ------------------------------------------------------------------ */
    function handleCardClick(id) {
      const card = CARDS[id];
      if (!card) return;
      currentCardId = id;

      // ë¼ë²¨
      const labelRow = document.getElementById('detailLabels');
      labelRow.innerHTML = card.labels.map(l =>
        `<span class="detail-label-item" style="background:${l.bg};color:${l.color};">
          ${escHtml(l.name)}
          <span class="remove-label" onclick="removeDetailLabel(this,'${escHtml(l.name)}')">âœ•</span>
        </span>`
      ).join('');

      // ì œëª©
      document.getElementById('detailTitle').textContent = card.title;

      // ë¸Œë ˆë“œí¬ëŸ¼
      const crumbEl = document.getElementById('detailBreadcrumb');
      if (card.breadcrumb && card.breadcrumb.length) {
        let html = '';
        card.breadcrumb.forEach((b, i) => {
          if (i > 0) html += '<span class="breadcrumb-arrow">â€º</span>';
          html += `<span class="breadcrumb-badge" style="background:${b.bg};color:${b.color};">[${b.type}] ${escHtml(b.label)}</span>`;
        });
        html += ` <button class="btn-edit-crumb" onclick="toggleCrumbEditor()">âœ í¸ì§‘</button>`;
        crumbEl.innerHTML = html;
      } else {
        crumbEl.innerHTML = `<button class="btn-edit-crumb" onclick="toggleCrumbEditor()">âœ ê³„ì¸µ ì„¤ì •</button>`;
      }

      // í¬ëŸ¼ í¸ì§‘ê¸° ì´ˆê¸° ìˆ¨ê¹€
      document.getElementById('crumbEditor').classList.remove('show');

      // ë©”íƒ€
      const statusLabels = { BACKLOG:'Backlog', TODO:'TODO', IN_PROGRESS:'In Progress', DONE:'Done' };
      const statusClasses = { BACKLOG:'status-backlog', TODO:'status-todo', IN_PROGRESS:'status-inprogress', DONE:'status-done' };
      const priorityClasses = { CRITICAL:'priority-critical', HIGH:'priority-high', MEDIUM:'priority-medium', LOW:'priority-low' };
      const assigneeColors = { 'í™':'#629584', 'ê¹€':'#3B82F6', 'ì´':'#8B5CF6' };
      let metaHtml = `<span class="meta-badge ${statusClasses[card.status] || ''}">${statusLabels[card.status] || card.status}</span>`;
      metaHtml += `<span class="priority-badge ${priorityClasses[card.priority] || ''}">${card.priority}</span>`;
      if (card.due) {
        const overdueCls = card.overdue ? '' : 'normal';
        metaHtml += `<span class="meta-badge meta-due ${overdueCls}">ğŸ“… ${escHtml(card.due)}</span>`;
      }
      if (card.assignee) {
        const bg = assigneeColors[card.assignee] || '#629584';
        metaHtml += `<span class="meta-badge meta-assignee" style="display:inline-flex;align-items:center;gap:6px;">
          <span style="width:18px;height:18px;border-radius:50%;background:${bg};color:#fff;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center;">${escHtml(card.assignee)}</span>
          ${escHtml({'í™':'í™ê¸¸ë™','ê¹€':'ê¹€ë¯¼ìˆ˜','ì´':'ì´ì„œì—°'}[card.assignee] || card.assignee)}
        </span>`;
      }
      document.getElementById('detailMeta').innerHTML = metaHtml;

      // ì„¤ëª…
      document.getElementById('detailDesc').textContent = card.desc || 'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.';

      // ì²´í¬ë¦¬ìŠ¤íŠ¸
      renderDetailChecklist(card.checklist || []);

      // í™œë™ ë‚´ì—­
      const actList = document.getElementById('activityList');
      actList.innerHTML = (card.activity || []).map(a => `
        <div class="activity-item">
          <div class="activity-avatar" style="background:${a.avatarBg};">${escHtml(a.whoAvatar)}</div>
          <div class="activity-content">
            <div class="activity-meta"><strong>${escHtml(a.who)}</strong> &nbsp;${escHtml(a.time)}</div>
            <div class="activity-bubble">${escHtml(a.msg)}</div>
          </div>
        </div>
      `).join('');

      document.getElementById('commentInput').value = '';
      document.getElementById('detailModal').classList.add('open');
    }

    function renderDetailChecklist(items) {
      const list = document.getElementById('detailChecklistItems');
      const title = document.getElementById('detailChecklistTitle');
      const bar = document.getElementById('detailProgressBar');
      const done = items.filter(i => i.done).length;
      const total = items.length;
      title.textContent = `ì²´í¬ë¦¬ìŠ¤íŠ¸ (${done}/${total})`;
      bar.style.width = total ? `${Math.round(done/total*100)}%` : '0%';
      list.innerHTML = items.map((item, idx) => `
        <li class="detail-checklist-item">
          <input type="checkbox" id="chk${idx}" ${item.done?'checked':''} onchange="toggleDetailCheck(${idx})" />
          <label for="chk${idx}" class="${item.done?'done':''}">${escHtml(item.text)}</label>
          <button class="del-check" onclick="deleteDetailCheck(${idx})">âœ•</button>
        </li>
      `).join('');
    }

    function toggleDetailCheck(idx) {
      if (!currentCardId) return;
      CARDS[currentCardId].checklist[idx].done = !CARDS[currentCardId].checklist[idx].done;
      renderDetailChecklist(CARDS[currentCardId].checklist);
    }

    function deleteDetailCheck(idx) {
      if (!currentCardId) return;
      CARDS[currentCardId].checklist.splice(idx, 1);
      renderDetailChecklist(CARDS[currentCardId].checklist);
    }

    function addDetailCheckItem() {
      const input = document.getElementById('detailCheckInput');
      const text = input.value.trim();
      if (!text || !currentCardId) return;
      CARDS[currentCardId].checklist.push({ text, done: false });
      renderDetailChecklist(CARDS[currentCardId].checklist);
      input.value = '';
      input.focus();
    }

    function submitComment() {
      const input = document.getElementById('commentInput');
      const text = input.value.trim();
      if (!text || !currentCardId) return;
      const now = new Date();
      const timeStr = 'ë°©ê¸ˆ';
      const activity = { who:'í™ê¸¸ë™', whoAvatar:'í™', avatarBg:'#629584', time:timeStr, msg:text };
      CARDS[currentCardId].activity.push(activity);
      const actList = document.getElementById('activityList');
      const item = document.createElement('div');
      item.className = 'activity-item';
      item.innerHTML = `
        <div class="activity-avatar" style="background:#629584;">í™</div>
        <div class="activity-content">
          <div class="activity-meta"><strong>í™ê¸¸ë™</strong> &nbsp;ë°©ê¸ˆ</div>
          <div class="activity-bubble">${escHtml(text)}</div>
        </div>
      `;
      actList.appendChild(item);
      item.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      input.value = '';
    }

    function closeDetailModal() {
      document.getElementById('detailModal').classList.remove('open');
      document.getElementById('labelPickerDd').classList.remove('show');
      currentCardId = null;
    }

    /* ------------------------------------------------------------------ */
    /* ë¼ë²¨ í”¼ì»¤ (ìƒì„¸ ëª¨ë‹¬)                                                */
    /* ------------------------------------------------------------------ */
    function toggleLabelPicker() {
      document.getElementById('labelPickerDd').classList.toggle('show');
    }

    function addDetailLabel(name, bg, color) {
      if (!currentCardId) return;
      const card = CARDS[currentCardId];
      if (card.labels.some(l => l.name === name)) {
        document.getElementById('labelPickerDd').classList.remove('show');
        return;
      }
      card.labels.push({ name, bg, color });
      const row = document.getElementById('detailLabels');
      const span = document.createElement('span');
      span.className = 'detail-label-item';
      span.style.background = bg;
      span.style.color = color;
      span.innerHTML = `${escHtml(name)}<span class="remove-label" onclick="removeDetailLabel(this,'${escHtml(name)}')">âœ•</span>`;
      row.appendChild(span);
      document.getElementById('labelPickerDd').classList.remove('show');
    }

    function removeDetailLabel(btn, name) {
      if (!currentCardId) return;
      CARDS[currentCardId].labels = CARDS[currentCardId].labels.filter(l => l.name !== name);
      btn.closest('.detail-label-item').remove();
    }

    /* ------------------------------------------------------------------ */
    /* ì¹´í…Œê³ ë¦¬ í¸ì§‘ê¸°                                                       */
    /* ------------------------------------------------------------------ */
    function toggleCrumbEditor() {
      document.getElementById('crumbEditor').classList.toggle('show');
    }
    function saveCrumb() {
      document.getElementById('crumbEditor').classList.remove('show');
    }
    function cancelCrumb() {
      document.getElementById('crumbEditor').classList.remove('show');
    }

    /* ------------------------------------------------------------------ */
    /* ìƒì„¸ ëª¨ë‹¬ - ê¸°íƒ€ ë²„íŠ¼                                                 */
    /* ------------------------------------------------------------------ */
    function deleteCurrentCard() {
      if (!currentCardId) return;
      const card = CARDS[currentCardId];
      if (!confirm(`"${card.title}" ì—…ë¬´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) return;
      const el = document.getElementById(currentCardId);
      if (el) {
        const lane = el.closest('.column-body');
        el.remove();
        if (lane) {
          const col = lane.closest('.column');
          if (col) {
            const cnt = col.querySelector('.column-count');
            if (cnt) cnt.textContent = Math.max(0, parseInt(cnt.textContent) - 1);
          }
        }
      }
      delete CARDS[currentCardId];
      closeDetailModal();
    }

    function duplicateCard() {
      if (!currentCardId) return;
      const card = CARDS[currentCardId];
      const newId = 'card-' + Date.now();
      CARDS[newId] = JSON.parse(JSON.stringify(card));
      CARDS[newId].title = card.title + ' (ë³µì‚¬ë³¸)';
      closeDetailModal();
      const laneMap = { BACKLOG:'lane-backlog', TODO:'lane-todo', IN_PROGRESS:'lane-inprogress', DONE:'lane-done' };
      const cntMap  = { BACKLOG:'cnt-backlog', TODO:'cnt-todo', IN_PROGRESS:'cnt-inprogress', DONE:'cnt-done' };
      const lane = document.getElementById(laneMap[card.status]);
      if (lane) {
        const priorityClasses = { CRITICAL:'priority-critical', HIGH:'priority-high', MEDIUM:'priority-medium', LOW:'priority-low' };
        const labelsHtml = CARDS[newId].labels.map(l =>
          `<span class="label-badge" style="background:${l.bg};color:${l.color};">${escHtml(l.name)}</span>`
        ).join('');
        const html = `
          <div class="ticket-card" id="${newId}" onclick="handleCardClick('${newId}')">
            ${labelsHtml ? `<div class="card-labels">${labelsHtml}</div>` : ''}
            <div class="card-title">${escHtml(CARDS[newId].title)}</div>
            <div class="card-footer">
              <span class="priority-badge ${priorityClasses[card.priority] || 'priority-medium'}">${card.priority}</span>
            </div>
          </div>
        `;
        lane.insertAdjacentHTML('afterbegin', html);
        const cnt = document.getElementById(cntMap[card.status]);
        if (cnt) cnt.textContent = parseInt(cnt.textContent) + 1;
      }
    }

    function moveCard() {
      if (!currentCardId) return;
      const card = CARDS[currentCardId];
      const statuses = ['BACKLOG','TODO','IN_PROGRESS','DONE'];
      const labels   = ['Backlog','TODO','In Progress','Done'];
      const current = statuses.indexOf(card.status);
      const opts = statuses.map((s,i) => `${i}: ${labels[i]}${s===card.status?' (í˜„ì¬)':''}`).join('\n');
      const input = prompt(`ì´ë™í•  ì¹¼ëŸ¼ì„ ì„ íƒí•˜ì„¸ìš”:\n\n${opts}\n\në²ˆí˜¸ ì…ë ¥:`);
      if (input === null) return;
      const idx = parseInt(input);
      if (isNaN(idx) || idx < 0 || idx > 3) return;
      const newStatus = statuses[idx];
      if (newStatus === card.status) return;

      const laneMap = { BACKLOG:'lane-backlog', TODO:'lane-todo', IN_PROGRESS:'lane-inprogress', DONE:'lane-done' };
      const cntMap  = { BACKLOG:'cnt-backlog', TODO:'cnt-todo', IN_PROGRESS:'cnt-inprogress', DONE:'cnt-done' };

      const el = document.getElementById(currentCardId);
      if (el) {
        const oldCnt = document.getElementById(cntMap[card.status]);
        if (oldCnt) oldCnt.textContent = Math.max(0, parseInt(oldCnt.textContent) - 1);
        document.getElementById(laneMap[newStatus]).insertAdjacentElement('afterbegin', el);
        const newCnt = document.getElementById(cntMap[newStatus]);
        if (newCnt) newCnt.textContent = parseInt(newCnt.textContent) + 1;
      }
      CARDS[currentCardId].status = newStatus;
      closeDetailModal();
    }

    function editCard() {
      if (!currentCardId) return;
      const card = CARDS[currentCardId];
      closeDetailModal();
      showNewModal(card.status);
      setTimeout(() => {
        document.getElementById('newTitle').value = card.title;
        document.getElementById('newDesc').value = card.desc || '';
        document.getElementById('newStatus').value = card.status;
        document.getElementById('newPriority').value = card.priority;
        if (card.assignee) document.getElementById('newAssignee').value = card.assignee;
        card.labels.forEach(l => {
          const chip = document.querySelector(`#newLabelChips .label-chip.${l.name}`);
          if (chip) chip.classList.add('selected');
        });
      }, 50);
    }

    /* ------------------------------------------------------------------ */
    /* ì˜¤ë²„ë ˆì´ í´ë¦­ & ESC                                                  */
    /* ------------------------------------------------------------------ */
    function overlayClick(e, modalId) {
      if (e.target.id === modalId) {
        if (modalId === 'newModal') closeNewModal();
        else closeDetailModal();
      }
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        if (document.getElementById('detailModal').classList.contains('open')) closeDetailModal();
        else if (document.getElementById('newModal').classList.contains('open')) closeNewModal();
        document.querySelectorAll('.dropdown-menu').forEach(m => m.classList.remove('show'));
      }
    });

    /* ------------------------------------------------------------------ */
    /* ìœ í‹¸                                                                 */
    /* ------------------------------------------------------------------ */
    function escHtml(str) {
      if (!str) return '';
      return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    }
  </script>
</body>
</html>
